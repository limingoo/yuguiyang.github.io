<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>于贵洋的博客</title>
  <subtitle>BI、数据分析</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://yuguiyang.github.io/"/>
  <updated>2017-08-29T14:48:43.744Z</updated>
  <id>https://yuguiyang.github.io/</id>
  
  <author>
    <name>于贵洋</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>博客迁移整理中(置顶)</title>
    <link href="https://yuguiyang.github.io/2017/12/31/top/"/>
    <id>https://yuguiyang.github.io/2017/12/31/top/</id>
    <published>2017-12-31T13:59:00.000Z</published>
    <updated>2017-08-29T14:48:43.744Z</updated>
    
    <content type="html"><![CDATA[<p>Hi，欢迎访问我的博客。最近正在迁移文章到这里，不定时更新中，请期待。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hi，欢迎访问我的博客。最近正在迁移文章到这里，不定时更新中，请期待。&lt;/p&gt;

    
    </summary>
    
      <category term="随笔" scheme="https://yuguiyang.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="随笔" scheme="https://yuguiyang.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>要不要找一份数据分析的工作？</title>
    <link href="https://yuguiyang.github.io/2017/10/18/jotting-02/"/>
    <id>https://yuguiyang.github.io/2017/10/18/jotting-02/</id>
    <published>2017-10-18T09:00:00.000Z</published>
    <updated>2017-10-18T09:25:16.814Z</updated>
    
    <content type="html"><![CDATA[<p>前面，我们使用Python将拉勾网的数据爬取了下来，下面，我们就用Tableau做下探索式分析。</p>
<p>#数据基本情况介绍<br>我们在Python中只做了简单的清洗和整合，数据保存在MySQL中，数据只抓取了几个热门城市<br>表结构如下<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`tm_lagou_data`</span> (</div><div class="line">  <span class="string">`city`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'城市'</span>,</div><div class="line">  <span class="string">`company_short_name`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'公司简称'</span>,</div><div class="line">  <span class="string">`company_full_name`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'公司全称'</span>,</div><div class="line">  <span class="string">`company_industry`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'所属行业'</span>,</div><div class="line">  <span class="string">`company_location`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'工作地点'</span>,</div><div class="line">  <span class="string">`position_advantage`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'岗位特点'</span>,</div><div class="line">  <span class="string">`position_salary`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'薪资'</span>,</div><div class="line">  <span class="string">`position_workyear`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'工作经验'</span>,</div><div class="line">  <span class="string">`position_name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'职位名称'</span>,</div><div class="line">  <span class="string">`position_first_type`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'岗位类型-大类'</span>,</div><div class="line">  <span class="string">`position_second_type`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'岗位类型-小类'</span>,</div><div class="line">  <span class="string">`position_lables`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'岗位标签'</span>,</div><div class="line">  <span class="string">`position_id`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'岗位ID'</span>,</div><div class="line">  <span class="string">`create_time`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'发布时间'</span>,</div><div class="line">  <span class="string">`job_desc`</span> <span class="built_in">text</span> <span class="keyword">comment</span> <span class="string">'岗位描述'</span></div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">'拉勾网-数据分析数据'</span>;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-0185d4d0faff7a03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>洗个脸，刷个牙我们要开始分析啦。</p>
<p>#哪儿的数据分析岗位最多呢？<br>作为一名求职者，我想知道哪里的数据分析岗位最多，我以后要去哪个城市上班呢？是不是我喜欢的城市呢？<br>打开Tableau，连上数据库，我们开始<br>我们的数据中，有城市信息，也有招聘公司信息，岗位信息，所以这个很简单</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-f9cdb0b0c6cbb6e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>我们会发现，北上深杭广招聘数据分析的公司和岗位最多，公司多，招聘的岗位也多嘛，<br>所以，如果要找数据分析的工作，在这几个城市还是很有机会的，随着北上广深等城市的带动，新一线城市后续应该也会逐渐提高对数据的重视，数据分析岗位应该会越来越多。<br>这里也发现一个有趣的问题，就是杭州和广州，以前我们说一线城市，可能主要是北上广深，最近几年随着杭州的崛起（我觉得和阿里有很大的关系），广州是不是逐渐的掉队了呢？</p>
<p>最近正好十九大，推出了纪念邮票，好多新闻都是这张图<br><img src="http://upload-images.jianshu.io/upload_images/76024-1998dc950f5d8c8e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>广州到底咋了，后面我们也可以找些数据分析下。<br>单从拉勾的招聘信息的确可以看出，杭州的对数据分析的需求量的确稍大于广州。<br>我们顺便看下杭州和广州，在哪些行业存在差距</p>
<p>就招聘数据分析的公司数量来看，移动互联网、金融、O2O等行业，杭州都明显多于广州，但一些行业，像游戏、娱乐，广州还是多于杭州的，这可能和创业的环境也有关系<br><img src="http://upload-images.jianshu.io/upload_images/76024-857c673018fb41b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>#是我喜欢的行业吗？<br>以前刚毕业的时候，觉得行业不重要，哪里工资高我就去哪儿（当然，去哪儿不归我管，人家得要我啊）<br>工作这些年发现，选择一个喜欢的行业真的很重要，前面，我们也看了杭州和广州的行业分布，整体环境呢？<br><img src="http://upload-images.jianshu.io/upload_images/76024-35d172b71104af22.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>需求量最高的依然的移动互联网，现在都是互联网+，移动端更加的流量越来越大，这些行业也都走在技术前沿。</p>
<p>#数据分析对工作经验有啥要求？<br>前面我们知道了，北上深杭对数据分析师的需求量很大，我刚毕业，或者工作1，2年，可以去应聘吗？<br>我们来看看。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-11f6b1e49aacd60d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>就工作经验来看，北上深杭广70%以上的岗位都是1-3年、3-5年的工作经验，所以，好好准备下，放心大胆的投入数据分析的事业中去吧。<br>应届生也不用怕，可能校招的岗位这些互联网公司没有发在拉钩上，多关注企业的招聘公告和宣讲会之类的；这里还有不限工作经验的工作呢，只要你掌握数据分析的技能和相关知识，一定可以的。</p>
<h1 id="薪资够付房租吗？"><a href="#薪资够付房租吗？" class="headerlink" title="薪资够付房租吗？"></a>薪资够付房租吗？</h1><p>找工作一个是前景，一个是钱景，房租那么贵，数据分析师的工资咋样？<br>由于网上招聘的薪资，都是一个区间，比如 10K-20K，我就取了个平均值，然后取中位数，这样不是很严谨，但也能反映一些问题<br><img src="http://upload-images.jianshu.io/upload_images/76024-0c18e1c559e950df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>整体来看，薪资还是基本符合大众情况的，但是北京那个10年以上的咋才16K呢？<br>一定还有别的附加福利，数据是上周爬的，现在已经没有了，等我后面重跑下脚本看看</p>
<p>单从工作经验来看薪资分布<br><img src="http://upload-images.jianshu.io/upload_images/76024-4a800a2c71166d63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>练好技术，练好口才，面试时要谈好自己的工资啊，物价越来越高，不能光给我们谈理想，我们还得生活呢！</p>
<p>#有啥别的福利（面试时咋忽悠你）<br>拉勾上的招聘信息都有一个标签，岗位的一些优势，我们做成一个词云图看看</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-0b566aee1bf262ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>主要是基本的福利保障，弹性工作啊，带薪年假啊，年终奖啊，发展空间啥的，面试时，一定得问好，别不好意思问。</p>
<p>好辣，回到主题，我们要不要找一份数据分析的工作呢？</p>
<ul>
<li>机会很多，北上深杭广需求量都不少</li>
<li>行业也不错，紧随时代潮流</li>
<li>薪资也可以啊，主要还是看自己实力哈</li>
</ul>
<p>综上所述，数据分析很不靠谱，大家都不要来呦（老板，招不招数据分析，觉得我咋样）</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前面，我们使用Python将拉勾网的数据爬取了下来，下面，我们就用Tableau做下探索式分析。&lt;/p&gt;
&lt;p&gt;#数据基本情况介绍&lt;br&gt;我们在Python中只做了简单的清洗和整合，数据保存在MySQL中，数据只抓取了几个热门城市&lt;br&gt;表结构如下&lt;br&gt;&lt;figure c
    
    </summary>
    
      <category term="随笔" scheme="https://yuguiyang.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="随笔" scheme="https://yuguiyang.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
      <category term="数据分析报告" scheme="https://yuguiyang.github.io/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-疑问汇总</title>
    <link href="https://yuguiyang.github.io/2017/10/12/mysql-handbook-12/"/>
    <id>https://yuguiyang.github.io/2017/10/12/mysql-handbook-12/</id>
    <published>2017-10-12T10:00:00.000Z</published>
    <updated>2017-10-13T14:05:15.391Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>疑问汇总</p>
<p>这里吧同学们遇到的问题都汇总起来，方便大家一起查阅。</p>
<h2 id="update-at-2017-10-13"><a href="#update-at-2017-10-13" class="headerlink" title="update at 2017-10-13"></a>update at 2017-10-13</h2><h3 id="Workbench安装问题"><a href="#Workbench安装问题" class="headerlink" title="Workbench安装问题"></a>Workbench安装问题</h3><p>昨天就说过Workbench的安装问题，具体的可以往下看，这里记录一个类似问题<br>因为安装Workbench需要一些依赖先安装，比如那个.NET Framework，官网上提供的连接地址应该没有修改，如果直接跳转去下载，应该是.NET FRAMEWORK４.５的，但实际安装的时候，是需要4.5.2的</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-dffabb12e4e55bb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>而且在安装4.5的时候，可能还会遇到这样的情况，说本地已经安装过了，所以去下载4.5.2就可以了，<br><img src="http://upload-images.jianshu.io/upload_images/76024-5a3b8ff3e217c3c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>后面经过同学的验证，就是这样解决的，没有问题。</p>
<a id="more"></a>
<h3 id="连接测试数据库"><a href="#连接测试数据库" class="headerlink" title="连接测试数据库"></a>连接测试数据库</h3><p>今天遇到一个使用客户端连接测试数据库一直不行的问题。背景是这样的：<br>测试数据库在阿里云上，很多人都可以访问，说明数据库配置啥的没有问题，但是有一位同学的电脑就是访问不了，报下面这个错误<br><img src="http://upload-images.jianshu.io/upload_images/76024-ef1392a615f872ca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>网上也找过，都说是服务器端配置问题，但是已知服务器端没有问题，这就奇了怪了，该电脑也是可以ping通服务器的。后面了解到，这位同学是在外企，公司的网络是美国的网络，但是网上查说国外访问国内的阿里云是可以的。没有想到其他什么原因，估计就是所在的公司网络有问题，导致连不到阿里云。<br>最后，同学回家后，用家里的网络就可以访问了。<br>这种问题，常见解决方法就是，排查2个方面</p>
<ul>
<li>服务器端配置问题</li>
<li>本地网络问题</li>
</ul>
<p>###SQLZoo练习题<br>原题地址<a href="http://zh.sqlzoo.net/wiki/More_JOIN_operations" target="_blank" rel="external">http://zh.sqlzoo.net/wiki/More_JOIN_operations</a><br>第13题</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-8c0eb786227f36eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这道题呢，不是很难，有2点比较难</p>
<ul>
<li>英文的，哈哈，借助了有道翻译</li>
<li>一个字段没理解含义，导致出错</li>
</ul>
<p>题目是啥意思呢？就是说要返回一个演员列表，按照字母顺序，主演过30个以上的角色<br>我们只要搞明白那几张表就行了</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-95c5eb48169c9f45.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这个演员名单表，存的是电影ID和演员ID，注意这个ord表示的是，电影中演员的排名，ord=1才表示主演<br>参考介绍<a href="http://zh.sqlzoo.net/wiki/More_details_about_the_database." target="_blank" rel="external">http://zh.sqlzoo.net/wiki/More_details_about_the_database.</a></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-b457f4b239165e2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这些都搞明白，SQL就容易了<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> actor <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="keyword">select</span> actorid <span class="keyword">from</span> casting <span class="keyword">where</span> <span class="keyword">ord</span>=<span class="number">1</span> <span class="keyword">group</span> <span class="keyword">by</span> actorid <span class="keyword">having</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> movieid)&gt;=<span class="number">30</span>)</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span> <span class="keyword">desc</span></div><div class="line"></div><div class="line"><span class="comment">-- 或者这样</span></div><div class="line"><span class="keyword">select</span> a.name <span class="keyword">from</span> actor a </div><div class="line"><span class="keyword">join</span> casting b <span class="keyword">on</span> a.id=b.actorid </div><div class="line"><span class="keyword">where</span> b.ord=<span class="number">1</span> </div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.name</div><div class="line"><span class="keyword">having</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> b.movieid)&gt;=<span class="number">30</span></div></pre></td></tr></table></figure></p>
<p>上面的order by可以不要，好辣，今天问题整理到这里。</p>
<hr>
<h2 id="update-at-2017-10-12"><a href="#update-at-2017-10-12" class="headerlink" title="update at 2017-10-12"></a>update at 2017-10-12</h2><h3 id="1-Workbench、Navicat是干嘛的，和SQL有啥关系？"><a href="#1-Workbench、Navicat是干嘛的，和SQL有啥关系？" class="headerlink" title="1. Workbench、Navicat是干嘛的，和SQL有啥关系？"></a>1. Workbench、Navicat是干嘛的，和SQL有啥关系？</h3><p>Workbench和Navicat都是数据库管理工具，让我们可以方便快捷的管理和使用数据库。类似的工具有很多，免费的、收费的好多好多，就好像共享单车，ofo、mobike、小蓝单车、小鸣单车……用哪个都可以，看我们的选择了。</p>
<p>SQL呢？是一种查询语言，虽然和写代码编程有关，但是不用怕，记住九九乘法表，后面就是活学活用了。我们为了和数据库成为好朋友，得多和他聊天吧，但我们和他不是一个星球的，那咋办？巧了，他听得懂SQL，那我们学下SQL，就可以愉快的玩耍了。这里呢，我们还得注意一下，目前市场上在使用的数据库有很多，</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-2f8349a4793e8a7c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="dbs"></p>
<!-- more -->
<p>SQL是一套标准，其他每个数据库都会实现规定的基本功能，然后拓展些自己的语法，所以很不幸，换一个数据库，我们的SQL不一定完全跑的通。<br>但是，只要我们掌握了标准的SQL语法然后针对不同的数据库，关注下特殊语法就可以了（会骑ofo，换了Mobike就不会骑了吗？）</p>
<p>综上所述，我们是通过管理工具（Workbench、Navicat……）去使用和管理数据库（MySQL…..），在管理工具中，我们使用SQL来和数据库互动。</p>
<h3 id="2-Workbench的使用"><a href="#2-Workbench的使用" class="headerlink" title="2. Workbench的使用"></a>2. Workbench的使用</h3><p>参考：<a href="http://yuguiyang.github.io/2017/10/12/mysql-handbook-11/">MySQL-Workbench使用</a></p>
<h3 id="3-sqlzoo第九题"><a href="#3-sqlzoo第九题" class="headerlink" title="3. sqlzoo第九题"></a>3. sqlzoo第九题</h3><p>题目地址: <a href="https://sqlzoo.net/wiki/SELECT_within_SELECT_Tutorial/zh" target="_blank" rel="external">sqlzoo</a><br>首先是关于all的疑问</p>
<p>关于all可以参考这里先简单了解下：<a href="http://yuguiyang.github.io/2017/09/11/mysql-handbook-08/">MySQL-子查询的使用</a></p>
<p>SQL这样写是没问题的<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> </div><div class="line">    <span class="keyword">name</span>,</div><div class="line">    continent,</div><div class="line">    population </div><div class="line"><span class="keyword">FROM</span> </div><div class="line">    world x</div><div class="line">    <span class="comment">-- 返回符合条件的所有数据</span></div><div class="line"><span class="keyword">WHERE</span> </div><div class="line">    <span class="comment">-- 使用all，判断该州的所有人口数是否都 &lt;= 25000000</span></div><div class="line">    <span class="number">25000000</span>  &gt;= ALL(</div><div class="line">        <span class="comment">-- 我们使用子查询，获取每一个州的所有人口数</span></div><div class="line">        <span class="keyword">SELECT</span> </div><div class="line">            population </div><div class="line">        <span class="keyword">FROM</span> </div><div class="line">            world y </div><div class="line">        <span class="keyword">WHERE</span>  x.continent =y.continent</div><div class="line">    )</div></pre></td></tr></table></figure></p>
<ul>
<li>疑问1： 能不能把这个all放到后面像这样</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-a537d0341c36d46f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>答案是不行的，这个不符合all的使用语法，具体语法参考官方文档：<a href="https://dev.mysql.com/doc/refman/5.7/en/all-subqueries.html" target="_blank" rel="external">https://dev.mysql.com/doc/refman/5.7/en/all-subqueries.html</a></p>
<p>all一定要放在一个比较运算符的后面才行，所以，替换是不符合规范的，会报错<br><img src="http://upload-images.jianshu.io/upload_images/76024-5038df8497d11e52.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>疑问2：为什么下面的写法不对<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span></div><div class="line">    <span class="keyword">name</span>,</div><div class="line">    continent,</div><div class="line">    population </div><div class="line"><span class="keyword">FROM</span> </div><div class="line">    world </div><div class="line"><span class="keyword">WHERE</span>  </div><div class="line">    <span class="number">25000000</span> &gt;= ALL(</div><div class="line">        <span class="keyword">SELECT</span> </div><div class="line">            <span class="keyword">MAX</span>(population) </div><div class="line">        <span class="keyword">FROM</span> </div><div class="line">            world  </div><div class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> </div><div class="line">            continent </div><div class="line">    )</div></pre></td></tr></table></figure>
</li>
</ul>
<p>我们分析下题目，他是说要查询出州下面每个城市的人口数都小于等于25000000的记录<br>上面我们就是使用all来实现去判断每个州下面的所有城市的人口数都&lt;= 25000000，现在呢，不想去判断每个城市的人口数了，我只要拿出该州下面最大的人口数，然后判断这个最大值是不是&lt;= 25000000就可以了。<br>思路是对的，但是SQL稍微有些问题<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 要么返回所有记录，要么没有返回记录</span></div><div class="line"><span class="keyword">SELECT</span></div><div class="line">    <span class="keyword">name</span>,</div><div class="line">    continent,</div><div class="line">    population </div><div class="line"><span class="keyword">FROM</span> </div><div class="line">    world </div><div class="line"><span class="keyword">WHERE</span>  </div><div class="line">    <span class="comment">-- 因为主表world和子查询没有关联关系，所以这里的all就变成了“每个州的最大人口数是不是都 &lt;= 25000000</span></div><div class="line">    <span class="comment">-- 也就是说，下面子查询的返回值，如果都是 &lt;= 25000000，那就会返回world表的所有数据；如果有一个州的人口数 &gt;25000000，那就没有记录返回</span></div><div class="line">    <span class="number">25000000</span> &gt;= ALL(</div><div class="line">        <span class="comment">-- 获取每个州，最大的人口数</span></div><div class="line">        <span class="keyword">SELECT</span> </div><div class="line">            <span class="keyword">MAX</span>(population) </div><div class="line">        <span class="keyword">FROM</span> </div><div class="line">            world  </div><div class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> </div><div class="line">            continent </div><div class="line">    )</div></pre></td></tr></table></figure></p>
<p>所以，我们要做的改动，就是让主表和子查询有关联关系，即判断每一个州的最大值</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-6a16efbffe7d9a3e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>不使用all也可以，<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查询符合条件的州即可</span></div><div class="line"><span class="keyword">select</span> <span class="keyword">name</span>,continent,population <span class="keyword">from</span> world <span class="keyword">where</span> continent <span class="keyword">in</span> (</div><div class="line">    <span class="comment">-- 使用having直接过滤，判断每个州的最大人口是否&lt;= 25000000</span></div><div class="line">    <span class="keyword">select</span> continent <span class="keyword">from</span> world <span class="keyword">group</span> <span class="keyword">by</span> continent <span class="keyword">having</span> <span class="keyword">max</span>(population) &lt;= <span class="number">25000000</span></div><div class="line">)</div></pre></td></tr></table></figure></p>
<p>好了，这个问题，也写到这，大家可以看看还有没有别的写法。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;疑问汇总&lt;/p&gt;
&lt;p&gt;这里吧同学们遇到的问题都汇总起来，方便大家一起查阅。&lt;/p&gt;
&lt;h2 id=&quot;update-at-2017-10-13&quot;&gt;&lt;a href=&quot;#update-at-2017-10-13&quot; class=&quot;headerlink&quot; title=&quot;update at 2017-10-13&quot;&gt;&lt;/a&gt;update at 2017-10-13&lt;/h2&gt;&lt;h3 id=&quot;Workbench安装问题&quot;&gt;&lt;a href=&quot;#Workbench安装问题&quot; class=&quot;headerlink&quot; title=&quot;Workbench安装问题&quot;&gt;&lt;/a&gt;Workbench安装问题&lt;/h3&gt;&lt;p&gt;昨天就说过Workbench的安装问题，具体的可以往下看，这里记录一个类似问题&lt;br&gt;因为安装Workbench需要一些依赖先安装，比如那个.NET Framework，官网上提供的连接地址应该没有修改，如果直接跳转去下载，应该是.NET FRAMEWORK４.５的，但实际安装的时候，是需要4.5.2的&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-dffabb12e4e55bb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;而且在安装4.5的时候，可能还会遇到这样的情况，说本地已经安装过了，所以去下载4.5.2就可以了，&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-5a3b8ff3e217c3c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;后面经过同学的验证，就是这样解决的，没有问题。&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-Workbench使用</title>
    <link href="https://yuguiyang.github.io/2017/10/12/mysql-handbook-11/"/>
    <id>https://yuguiyang.github.io/2017/10/12/mysql-handbook-11/</id>
    <published>2017-10-12T08:00:00.000Z</published>
    <updated>2017-10-12T10:00:18.478Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>Workbench使用</p>
<p>简单介绍下Workbench的使用<br>Workbench是MySQL官方提供的一个可视化管理工具，跨多个平台而且免费的，详情参考<a href="https://www.mysql.com/products/workbench/" target="_blank" rel="external">官网</a>。<br>我们从下载地址下载，安装就行了</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><img src="http://upload-images.jianshu.io/upload_images/76024-7b7ea58cc50de3b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="workbench 安装"><br>可以单独下载，也可以使用提供的一个管理工具统一下载管理，管理工具提供了整个MySQL所有相关组件的统一管理维护，也挺方便。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-f1ad915acdeb4815.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="管理工具"></p>
<a id="more"></a>
<p>我们这里就是用独立安装包了，下载完之后安装，可能会失败，因为他有2个依赖要先安装，失败的话，会提示你缺少的依赖。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-e72ac9b47dc55954.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="依赖"></p>
<p>这里有个小坑，这里说的是.NET Framework 4.5，但实际上需要的是4.5.2貌似不太一样，所以刚刚一直安装失败，注意下就行了<a href="https://www.microsoft.com/en-us/download/details.aspx?id=42642" target="_blank" rel="external">.NET Framework 4.5.2</a></p>
<p>安装过程就是一路Next就行了，没啥特殊的。<br>安装完之后，我们在桌面或者菜单找到这个</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-df302f1ca148ad08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>主界面应该是这样：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-464160f15ea2fc02.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="主界面"></p>
<h2 id="新建连接"><a href="#新建连接" class="headerlink" title="新建连接"></a>新建连接</h2><p>我们点击加号，新增一个连接<br><img src="http://upload-images.jianshu.io/upload_images/76024-b965fbf385983a07.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="新建连接"></p>
<p>在弹出的界面上，输入数据库的连接信息，就可以了，密码下图所示的地方输入</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-084e3359386f57c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="密码"></p>
<p>输入完成后，我们测试下连接是否正常<br><img src="http://upload-images.jianshu.io/upload_images/76024-e52ac70f136395ff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试连接"></p>
<p>都正常后，我们单击OK就好了</p>
<p>返回主界面后，可以看到我们刚刚新建的连接，我们双击就可以打开这个连接，开始我们的SQL学习了<br><img src="http://upload-images.jianshu.io/upload_images/76024-b9e4445db4c84577.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="成功的连接"></p>
<h2 id="功能介绍"><a href="#功能介绍" class="headerlink" title="功能介绍"></a>功能介绍</h2><p><img src="http://upload-images.jianshu.io/upload_images/76024-95ed8b3f264f8166.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="主界面介绍"><br>我们目前主要关心的是SQL的学习，所以那些管理功能可以先忽略掉<br>我们主要关注“当前可以使用的数据库”和SQL的编辑界面就OK了</p>
<p>我们以demo库为例</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-ed56a50a473520b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="demo库"><br>这里就是demo库中的表，数据库中的数据是以表的形式保存的<br>比如，我们看看学生表的表结构信息，单击这个表旁边的”i”图标</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-4f73aaf40415718f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表结构"></p>
<p>右边会显示一个表的信息界面，字段啊，索引啊，触发器之类的，我们这里就看看DDL<br><img src="http://upload-images.jianshu.io/upload_images/76024-74048925f5ad4b09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表信息"></p>
<p>这里展示的就是t_student表的表结构信息<br><img src="http://upload-images.jianshu.io/upload_images/76024-a669737616fa7148.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ddl"></p>
<h2 id="SQL练习"><a href="#SQL练习" class="headerlink" title="SQL练习"></a>SQL练习</h2><p>下面，我们看看，怎样去练习SQL<br>我们回到刚刚的query界面</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-78f35b844bccc1ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="query界面"></p>
<p>首先，我们要选择我们使用的数据库<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">use</span> demo;</div></pre></td></tr></table></figure></p>
<p>写好SQL，我们单击那个像闪电一样的图标执行，下面的输出窗口会显示执行结果，绿色的对号表示正确执行<br><img src="http://upload-images.jianshu.io/upload_images/76024-8e7af97235422c15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="use db"></p>
<p>然后，就可以各种SQL开始练习了<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-e17c39c9930c96af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="select"></p>
<p>后面，我们就可以参考前面的博客，开始学习吧<a href="https://yuguiyang.github.io/2017/09/09/mysql-handbook-01/">MySQL-基本语法介绍</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;Workbench使用&lt;/p&gt;
&lt;p&gt;简单介绍下Workbench的使用&lt;br&gt;Workbench是MySQL官方提供的一个可视化管理工具，跨多个平台而且免费的，详情参考&lt;a href=&quot;https://www.mysql.com/products/workbench/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网&lt;/a&gt;。&lt;br&gt;我们从下载地址下载，安装就行了&lt;/p&gt;
&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-7b7ea58cc50de3b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;workbench 安装&quot;&gt;&lt;br&gt;可以单独下载，也可以使用提供的一个管理工具统一下载管理，管理工具提供了整个MySQL所有相关组件的统一管理维护，也挺方便。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-f1ad915acdeb4815.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;管理工具&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Tableau实例-帕累托图</title>
    <link href="https://yuguiyang.github.io/2017/09/20/Tableau-handbook-06/"/>
    <id>https://yuguiyang.github.io/2017/09/20/Tableau-handbook-06/</id>
    <published>2017-09-20T02:00:00.000Z</published>
    <updated>2017-09-19T16:08:05.729Z</updated>
    
    <content type="html"><![CDATA[<p>Tableau实例<br>帕累托图</p>
<p>前面，我们了解了<a href="https://yuguiyang.github.io/2017/09/18/jotting-01/">《帕累托的故事》</a> 和 <a href="https://yuguiyang.github.io//2017/09/18/analysis-method-01/">二八定律与长尾理论</a>，这里，我们学习下，在Tableau中，如何适用Tableau来绘制帕累托图。</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>数据源：官方数据源“示例-超市”<br>因为，帕累托分布，主要是20%的商品可以产生80%的价值，所以，我们可以使用示例数据中的订单数据，来看看订单的销量是否符合帕累托分布。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-b95435afb86c9e6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="数据源"></p>
<h1 id="初级-每个类别的销售额分布"><a href="#初级-每个类别的销售额分布" class="headerlink" title="初级-每个类别的销售额分布"></a>初级-每个类别的销售额分布</h1><p>我们先来研究下，看产品的类别销售额是否符合帕累托分布，帕累托图有一个柱形图，有一个折线图，<br>柱形图，表示每个类别的销售额，而折线图表示每个类别的销售额占比</p>
<p>柱形图就直接使用子类别和销售额就行了<br><img src="http://upload-images.jianshu.io/upload_images/76024-d8b12c89ef4325c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="每个类别的销售额"></p>
<p>然后，我们实现折线图<br>在行中，再拖一个销售额</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-15ceac91c846b724.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<a id="more"></a>
<p>然后修改标记的类型，改为“线”<br><img src="http://upload-images.jianshu.io/upload_images/76024-c8c25bc1f1f3b1bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>效果图<br><img src="http://upload-images.jianshu.io/upload_images/76024-483c6800fce90cea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>但这个折线图，并不是我们要的，我们想要的是一个占总额的百分比<br>我们要修改第2个“总计销售额”，添加表计算<br><img src="http://upload-images.jianshu.io/upload_images/76024-93bbe88f5b45395a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>我们主要计算类型，选择汇总-总计，并且勾选“添加辅助计算”，选择“总额百分比”<br><img src="http://upload-images.jianshu.io/upload_images/76024-5f3203403d0caf28.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>我们把修改好的“总额百分比”，拖到“标签”上，然后效果如图所示<br><img src="http://upload-images.jianshu.io/upload_images/76024-b54c815aedd3bbf9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>顺手，我们修改下折线图的颜色，因为后面，我们还要合并呢<br><img src="http://upload-images.jianshu.io/upload_images/76024-2efbd4852bac024a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>我们再折线图的y轴上，右键，单击选择“双轴”<br><img src="http://upload-images.jianshu.io/upload_images/76024-75a6f4ffaf3f25a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>他自动会变成这样，我们得手动改成柱形图和折线图（颜色也白改了…）<br><img src="http://upload-images.jianshu.io/upload_images/76024-6e96af2abe9baced.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>调整完之后，就是这样啦，<br><img src="http://upload-images.jianshu.io/upload_images/76024-7caeefa153b36655.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>我们调整下柱形图的y轴刻度，让他更像些</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-f06a129d1a45c22a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-47444732bcb67aa7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-2a98f1e8e1e85960.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h1 id="进阶-产品占比与销售额占比"><a href="#进阶-产品占比与销售额占比" class="headerlink" title="进阶-产品占比与销售额占比"></a>进阶-产品占比与销售额占比</h1><p>上面，我们做的是，哪些类别的销售额占80%，这里，我们想根据产品来看，并且想知道产品的百分之多少占了80%的销售额</p>
<p>和上面的步骤类似，这里，我们使用产品名称，效果如图<br><img src="http://upload-images.jianshu.io/upload_images/76024-60225105a25296c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>但是这里，产品实在是太多了，我们想让x轴更简洁一些，就显示百分比好了</p>
<p>未完待续……</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Tableau实例&lt;br&gt;帕累托图&lt;/p&gt;
&lt;p&gt;前面，我们了解了&lt;a href=&quot;https://yuguiyang.github.io/2017/09/18/jotting-01/&quot;&gt;《帕累托的故事》&lt;/a&gt; 和 &lt;a href=&quot;https://yuguiyang.github.io//2017/09/18/analysis-method-01/&quot;&gt;二八定律与长尾理论&lt;/a&gt;，这里，我们学习下，在Tableau中，如何适用Tableau来绘制帕累托图。&lt;/p&gt;
&lt;h1 id=&quot;准备&quot;&gt;&lt;a href=&quot;#准备&quot; class=&quot;headerlink&quot; title=&quot;准备&quot;&gt;&lt;/a&gt;准备&lt;/h1&gt;&lt;p&gt;数据源：官方数据源“示例-超市”&lt;br&gt;因为，帕累托分布，主要是20%的商品可以产生80%的价值，所以，我们可以使用示例数据中的订单数据，来看看订单的销量是否符合帕累托分布。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-b95435afb86c9e6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;数据源&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;初级-每个类别的销售额分布&quot;&gt;&lt;a href=&quot;#初级-每个类别的销售额分布&quot; class=&quot;headerlink&quot; title=&quot;初级-每个类别的销售额分布&quot;&gt;&lt;/a&gt;初级-每个类别的销售额分布&lt;/h1&gt;&lt;p&gt;我们先来研究下，看产品的类别销售额是否符合帕累托分布，帕累托图有一个柱形图，有一个折线图，&lt;br&gt;柱形图，表示每个类别的销售额，而折线图表示每个类别的销售额占比&lt;/p&gt;
&lt;p&gt;柱形图就直接使用子类别和销售额就行了&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-d8b12c89ef4325c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;每个类别的销售额&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后，我们实现折线图&lt;br&gt;在行中，再拖一个销售额&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-15ceac91c846b724.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Tableau" scheme="https://yuguiyang.github.io/categories/Tableau/"/>
    
    
      <category term="数据可视化" scheme="https://yuguiyang.github.io/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
      <category term="Tableau" scheme="https://yuguiyang.github.io/tags/Tableau/"/>
    
  </entry>
  
  <entry>
    <title>二八定律与长尾理论</title>
    <link href="https://yuguiyang.github.io/2017/09/18/analysis-method-01/"/>
    <id>https://yuguiyang.github.io/2017/09/18/analysis-method-01/</id>
    <published>2017-09-18T01:08:00.000Z</published>
    <updated>2017-09-19T14:07:05.940Z</updated>
    
    <content type="html"><![CDATA[<h1 id="二八定律"><a href="#二八定律" class="headerlink" title="二八定律"></a>二八定律</h1><p>前面，我们整理了<a href="https://yuguiyang.github.io/2017/09/18/jotting-01/">《帕累托的故事》</a>，里面有说过“帕累托法则”，就是这个二八定律，简单说来，就是</p>
<blockquote>
<p>世界上20%的人占有80%的财富，即财富的分布式是不平衡的</p>
</blockquote>
<p>这里理论不单单应用在经济学领域，其他领域也一样适用。比如：<br>在零售或销售行业，80%的利润可能来自20%的客户，所以运用该分析方法，就可以专注于维护这20%的客户，而不是将主要精力放在那80%的客户身上，因为他们只产生了20%的利润。通过80/20分析方法，可以有效的找到影响利润的主要因素</p>
<h2 id="二八定律应用场景"><a href="#二八定律应用场景" class="headerlink" title="二八定律应用场景"></a>二八定律应用场景</h2><p>这里列举几个广泛使用的场景</p>
<ul>
<li>在管理学中，企业80%的利润来自20%的项目或客户</li>
<li>心理学中，20%的人身上集中了80%的智慧，他们一出生就鹤立鸡群</li>
<li>20%的有目标，80%的人爱瞎想</li>
<li>20%的人把握机会，80%错失机会</li>
<li>20%的人会坚持，80%的人会放弃</li>
</ul>
<a id="more"></a>
<h1 id="长尾理论"><a href="#长尾理论" class="headerlink" title="长尾理论"></a>长尾理论</h1><p>长尾理论的关注点和二八定律不同，上面是说要关注产生重大影响的20%，而长尾理论则提倡关注剩下的那80%，在一些互联网公司，如果那80%的尾巴足够长，就可能会产生超过前面20%的那部分产生的利润。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-6262d4b48f4a778d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="长尾理论"><br>在互联网时代，关注成本或是生产、运输成本都大大的降低，这长尾巴就产生了优势。<br>该理论在Google、亚马逊、沃尔玛，都用数据证实过，互联网行业尤其适用。</p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>二八定律的话，告诉我们关注可以产生重大影响的事情，抓住主要的；<br>长尾理论的应用应该还是处在互联网公司中，等看看那本书，详细了解下。<br>有的时候，换个角度看问题，的确可以发现不一样的世界。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>资料来源“百度百科”，“维基百科”</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;二八定律&quot;&gt;&lt;a href=&quot;#二八定律&quot; class=&quot;headerlink&quot; title=&quot;二八定律&quot;&gt;&lt;/a&gt;二八定律&lt;/h1&gt;&lt;p&gt;前面，我们整理了&lt;a href=&quot;https://yuguiyang.github.io/2017/09/18/jotting-01/&quot;&gt;《帕累托的故事》&lt;/a&gt;，里面有说过“帕累托法则”，就是这个二八定律，简单说来，就是&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;世界上20%的人占有80%的财富，即财富的分布式是不平衡的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这里理论不单单应用在经济学领域，其他领域也一样适用。比如：&lt;br&gt;在零售或销售行业，80%的利润可能来自20%的客户，所以运用该分析方法，就可以专注于维护这20%的客户，而不是将主要精力放在那80%的客户身上，因为他们只产生了20%的利润。通过80/20分析方法，可以有效的找到影响利润的主要因素&lt;/p&gt;
&lt;h2 id=&quot;二八定律应用场景&quot;&gt;&lt;a href=&quot;#二八定律应用场景&quot; class=&quot;headerlink&quot; title=&quot;二八定律应用场景&quot;&gt;&lt;/a&gt;二八定律应用场景&lt;/h2&gt;&lt;p&gt;这里列举几个广泛使用的场景&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在管理学中，企业80%的利润来自20%的项目或客户&lt;/li&gt;
&lt;li&gt;心理学中，20%的人身上集中了80%的智慧，他们一出生就鹤立鸡群&lt;/li&gt;
&lt;li&gt;20%的有目标，80%的人爱瞎想&lt;/li&gt;
&lt;li&gt;20%的人把握机会，80%错失机会&lt;/li&gt;
&lt;li&gt;20%的人会坚持，80%的人会放弃&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="数据分析思维" scheme="https://yuguiyang.github.io/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%80%9D%E7%BB%B4/"/>
    
    
      <category term="数据分析思维" scheme="https://yuguiyang.github.io/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%80%9D%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>帕累托的故事</title>
    <link href="https://yuguiyang.github.io/2017/09/18/jotting-01/"/>
    <id>https://yuguiyang.github.io/2017/09/18/jotting-01/</id>
    <published>2017-09-18T00:08:00.000Z</published>
    <updated>2017-09-19T06:54:17.020Z</updated>
    
    <content type="html"><![CDATA[<p>周末听Tableau的一个培训，遇到一个帕累托图，就是关于二八定律的那个帕累托，就想着，他到底是干嘛的呢，然后，就有了这篇《帕累托的故事》，让我们开始了解一下这个经济学家。</p>
<h1 id="帕累托简介"><a href="#帕累托简介" class="headerlink" title="帕累托简介"></a>帕累托简介</h1><blockquote>
<p>维弗雷多·帕累托（Vilfredo Pareto ，1848年7月15日—1923年8月19日），意大利经济学家、社会学家，洛桑学派的主要代表之一。生于巴黎，曾就读于意大利都灵大学，后来任瑞士洛桑大学教授。<br>– 百度百科</p>
</blockquote>
<p>哦，他是一个经济学家、社会学家，怪不得会提出<strong>“20%的人掌握着百分之80%的财富”</strong>，以前，是先知道这句话，然后才知道帕累托的大名的。</p>
<h2 id="洛桑学派"><a href="#洛桑学派" class="headerlink" title="洛桑学派"></a>洛桑学派</h2><p>洛桑学派主要代表之一，什么是洛桑学派，干嘛的呢？估计是因为在洛桑大学任教，所以统称为<strong>“洛桑学派”</strong>吧</p>
<blockquote>
<p>“洛桑学派”指的是，以法国人瓦尔拉斯和意大利人帕累托为中心的新古典思想流派的一支。洛桑学派的主要特点在于它对一般均衡理论的推进，从而在广度上和深度上都扩大了新古典研究方法在经济学上的适用性。洛桑学派也被称为“数理学派”（因为它们强调数理的解释说明）或者“意大利学派”（因为在早期的队伍里有很多意大利人）。<br>– 百度百科</p>
</blockquote>
<a id="more"></a>
<p>数理学派，难道就是用数学和统计学来证明一些经济学理论？感觉好像是这样，他们一定是实战派，用数理方法来验证实际问题，厉害。<br>“对一般均衡理论的推进”，看看这个一般均衡理论是啥？</p>
<h2 id="一般均衡理论"><a href="#一般均衡理论" class="headerlink" title="一般均衡理论"></a>一般均衡理论</h2><blockquote>
<p>一般均衡理论（General Equilibrium Theory） 是1874年法国经济学家瓦尔拉斯在他的《纯粹经济学要义》中创立的。瓦尔拉斯认为，整个经济体系处于均衡状态时，所有消费品和生产要素的价格将有一个确定的均衡值，它们的产出和供给，将有一个确定的均衡量。他还认为在“完全竞争”的均衡条件下，出售一切生产要素的总收入和出售一切消费品的总收入必将相等。<br>该理论的实质是说明资本主义经济可以处于稳定的均衡状态。在资本主义经济中，消费者可以获得最大效用，企业家可以获得最大利润，生产要素的所有者可以得到最大报酬。<br>– 百度百科</p>
</blockquote>
<p>有点儿不明觉厉，反正是一个经济上了一个什么理论，果然是通过各种数理知识来解决真正改的经济学问题，大师就是大师，膜拜。<br>帕累托基于这个思路，进一步延伸和拓展了这一理论。</p>
<h1 id="主要成就"><a href="#主要成就" class="headerlink" title="主要成就"></a>主要成就</h1><p>下面，我们来了解下他的主要成就，仰望下大师</p>
<h2 id="帕累托法则"><a href="#帕累托法则" class="headerlink" title="帕累托法则"></a>帕累托法则</h2><p>这就是前面说到的那个80/20法则、二八定律</p>
<blockquote>
<p>帕累托法则是指在任何大系统中，约80%的结果是由该系统中约20%的变量产生的。</p>
</blockquote>
<p>帕累托主要是研究经济学和社会学的，在1906年，他观察了意大利的财富分配情况，发现80%的财富掌握在20%的人手里，<br>好残酷，但现实就是这样，我一定是那个80%里面的80%的里面的80%……</p>
<p>抽象一下，就变成这样：</p>
<blockquote>
<p>在任何特定群体中，重要的因子通常只占少数，而不重要的因子则占多数，因此只要能控制具有重要性的少数因子即能控制全局。</p>
</blockquote>
<p>一开始这一理论只限定于经济领域，后来逐步推广到各个领域，而且深为人们认同。<br>根据帕累托法则，延伸出很多的有趣的结论，像：</p>
<ul>
<li>世界上80%的资源是由15%的人口耗尽的</li>
<li>企业中80%的利润来自于20%的项目或客户</li>
<li>时间管理中，20%的项目或付出可以得来80%的成绩</li>
</ul>
<p>我们可以从不同的角度去理解和应用这一原则，比如：时间管理，财务管理、员工管理、市场营销等等，都会有意想不到的收获。</p>
<h2 id="帕累托最优"><a href="#帕累托最优" class="headerlink" title="帕累托最优"></a>帕累托最优</h2><p>帕累托最优(Pareto Optimality)也称为帕累托效率（Pareto Efficiency）、帕雷托最佳配置，是博弈论中的重要概念，并且在经济学， 工程学和社会科学中有着广泛的应用。 </p>
<blockquote>
<p>帕累托最优是指资源分配的一种理想状态，假定固有的一群人和可分配的资源，从一种分配状态到另一种状态的变化中，在没有使任何人境况变坏的前提下，使得至少一个人变得更好，这就是帕累托改进或帕累托最优化。帕累托最优的状态就是不可能再有更多的帕累托改进的余地；换句话说，帕累托改进是达到帕累托最优的路径和方法。帕累托最优是公平与效率的“理想王国”。</p>
</blockquote>
<p>这个也很有意思，<del>直白点儿说就是，你想要过的更好，就一定会有一个人过的更差，你想要挣更多的钱，就一定会有一个人挣更少的钱，又是一个残酷的现实啊</del>。<br>上面理解错了，帕累托最优说的是，在你挣了更多的钱的同时，也没有人因此少挣钱，强调的是不能减少任何一个人的福利。<br>维基百科上有一个例子：<br>说是有假设一个社会上，只有一个百万富翁和一个快饿死的乞丐，如果富翁拿出自己财富的万分之一，就可以让乞丐免于死亡，但是这样就损害了富翁的福利（假设乞丐没有可以回报富翁的服务或资源），这种财富转移，并不是“帕累托改进”，而这种社会被称为帕累托最优的。<br>帕累托最优，说的应该是一种理想社会，社会资源的分配已经非常合理，不会损害任何人的福利，但是这种社会里依然存在着富有与贫穷，依然存在贫富差距。</p>
<h1 id="帕累托图"><a href="#帕累托图" class="headerlink" title="帕累托图"></a>帕累托图</h1><p>帕累托图又叫排列图、主次图,是按照发生频率大小顺序绘制的直方图，表示有多少结果是由已确认类型或范畴的原因所造成。<br>帕累托图在项目管理中主要用来找出产生大多数问题的关键原因，用来解决大多数问题。通过这个图，就可以看出80%的财富掌握在20%的人手里。<br><img src="http://upload-images.jianshu.io/upload_images/76024-21f806599e2b4a7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="帕累托图"></p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>上面的内容有些比较难懂，需要慢慢的消化，后续等了解的更多了，会再补充。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>这里整理的时候，综合了“百度百科”，“维基百科”等等网上资料</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;周末听Tableau的一个培训，遇到一个帕累托图，就是关于二八定律的那个帕累托，就想着，他到底是干嘛的呢，然后，就有了这篇《帕累托的故事》，让我们开始了解一下这个经济学家。&lt;/p&gt;
&lt;h1 id=&quot;帕累托简介&quot;&gt;&lt;a href=&quot;#帕累托简介&quot; class=&quot;headerlink&quot; title=&quot;帕累托简介&quot;&gt;&lt;/a&gt;帕累托简介&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;维弗雷多·帕累托（Vilfredo Pareto ，1848年7月15日—1923年8月19日），意大利经济学家、社会学家，洛桑学派的主要代表之一。生于巴黎，曾就读于意大利都灵大学，后来任瑞士洛桑大学教授。&lt;br&gt;– 百度百科&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;哦，他是一个经济学家、社会学家，怪不得会提出&lt;strong&gt;“20%的人掌握着百分之80%的财富”&lt;/strong&gt;，以前，是先知道这句话，然后才知道帕累托的大名的。&lt;/p&gt;
&lt;h2 id=&quot;洛桑学派&quot;&gt;&lt;a href=&quot;#洛桑学派&quot; class=&quot;headerlink&quot; title=&quot;洛桑学派&quot;&gt;&lt;/a&gt;洛桑学派&lt;/h2&gt;&lt;p&gt;洛桑学派主要代表之一，什么是洛桑学派，干嘛的呢？估计是因为在洛桑大学任教，所以统称为&lt;strong&gt;“洛桑学派”&lt;/strong&gt;吧&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“洛桑学派”指的是，以法国人瓦尔拉斯和意大利人帕累托为中心的新古典思想流派的一支。洛桑学派的主要特点在于它对一般均衡理论的推进，从而在广度上和深度上都扩大了新古典研究方法在经济学上的适用性。洛桑学派也被称为“数理学派”（因为它们强调数理的解释说明）或者“意大利学派”（因为在早期的队伍里有很多意大利人）。&lt;br&gt;– 百度百科&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="随笔" scheme="https://yuguiyang.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="随笔" scheme="https://yuguiyang.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-自增列</title>
    <link href="https://yuguiyang.github.io/2017/09/12/mysql-handbook-10/"/>
    <id>https://yuguiyang.github.io/2017/09/12/mysql-handbook-10/</id>
    <published>2017-09-12T00:00:00.000Z</published>
    <updated>2017-09-15T07:09:23.149Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>自增列</p>
<h1 id="什么是自增列"><a href="#什么是自增列" class="headerlink" title="什么是自增列"></a>什么是自增列</h1><p>自增列就是一个自动增长的列，他没有什么业务含义，一般可能用来做主键，作为唯一标识。<br>自增列一般是一个整数，相比其他的UUID占用的存储更少，网络资源占用也少。如果考虑其他因素的话，UUID使用也很多。<br>实际应用还要考虑很多问题，不能单纯的使用</p>
<h1 id="自增列是使用"><a href="#自增列是使用" class="headerlink" title="自增列是使用"></a>自增列是使用</h1><p>我们可以再create table的时候，就定义好自增列<br>我们使用关键字 auto_increment 来指定。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create table t_book_1(</div><div class="line">    -&gt; id int auto_increment,</div><div class="line">    -&gt; f_name varchar(10),</div><div class="line">    -&gt; primary key(id)</div><div class="line">    -&gt; );</div></pre></td></tr></table></figure></p>
<p>这里的话，一定要让自增列是主键，不然会报错</p>
<a id="more"></a>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create table t_book_2(</div><div class="line">    -&gt; id int auto_increment,</div><div class="line">    -&gt; f_name varchar(10),</div><div class="line">    -&gt; f_other varchar(10)</div><div class="line">    -&gt; );</div><div class="line">ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key</div></pre></td></tr></table></figure>
<p>另一种方式就是先建表，后面再修改为auto_increment<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">mysql&gt; create table t_book_2(</div><div class="line">    -&gt; id int ,</div><div class="line">    -&gt; f_name varchar(10)</div><div class="line">    -&gt; );</div><div class="line">Query OK, 0 rows affected (0.01 sec)</div><div class="line"></div><div class="line">mysql&gt; alter table t_book_2 add primary key(id);</div><div class="line">Query OK, 0 rows affected (0.02 sec)</div><div class="line">Records: 0  Duplicates: 0  Warnings: 0</div><div class="line"></div><div class="line">mysql&gt; alter table t_book_2 modify id int auto_increment;</div><div class="line">Query OK, 0 rows affected (0.02 sec)</div><div class="line">Records: 0  Duplicates: 0  Warnings: 0</div></pre></td></tr></table></figure></p>
<h1 id="重置自增列"><a href="#重置自增列" class="headerlink" title="重置自增列"></a>重置自增列</h1><p>一般自增列，都是自动赋值的，我们先插入几条记录试试<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">mysql&gt; insert into t_book_2(f_name) values('aa');</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; insert into t_book_2(f_name) values('bb');</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; insert into t_book_2(f_name) values('cc');</div><div class="line">Query OK, 1 row affected (0.01 sec)</div><div class="line"></div><div class="line">mysql&gt; select *from t_book_2;</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">| id | f_name |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">|  1 | aa     |</div><div class="line">|  2 | bb     |</div><div class="line">|  3 | cc     |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure></p>
<p>这时候，自增列已经到3了，如果我们删除了一条数据，<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; delete from t_book_2 where id=3;</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; insert into t_book_2(f_name) values('dd');</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; select *from t_book_2;</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">| id | f_name |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">|  1 | aa     |</div><div class="line">|  2 | bb     |</div><div class="line">|  4 | dd     |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure></p>
<p>序列并不会重新从3开始，如果我们清空，也是一样的。那怎样可以重置自增列呢？</p>
<h2 id="使用truncate自动重置"><a href="#使用truncate自动重置" class="headerlink" title="使用truncate自动重置"></a>使用truncate自动重置</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">mysql&gt; truncate table t_book_2;</div><div class="line">Query OK, 0 rows affected (0.01 sec)</div><div class="line"></div><div class="line">mysql&gt; insert into t_book_2(f_name) values('ee');</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; select *from t_book_2;</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">| id | f_name |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">|  1 | ee     |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure>
<h2 id="手工修改"><a href="#手工修改" class="headerlink" title="手工修改"></a>手工修改</h2><p>我们可以使用命令<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 我们可以修改为我们想要的值，但如果表中有数据的话，如果修改</span></div><div class="line"><span class="comment">-- 的值比当前最大值小，则会重置为最大值+1</span></div><div class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_name auto_increment = <span class="number">1</span>;</div></pre></td></tr></table></figure></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">mysql&gt; delete from t_book_2 where id=3;</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; alter table t_book_2 auto_increment=3;</div><div class="line">Query OK, 0 rows affected (0.00 sec)</div><div class="line">Records: 0  Duplicates: 0  Warnings: 0</div><div class="line"></div><div class="line">mysql&gt; insert into t_book_2(f_name) values('hh');</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; select *from t_book_2;</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">| id | f_name |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">|  1 | ee     |</div><div class="line">|  2 | ff     |</div><div class="line">|  3 | hh     |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure>
<h2 id="直接drop，重新create"><a href="#直接drop，重新create" class="headerlink" title="直接drop，重新create"></a>直接drop，重新create</h2><p>这个方法就不练习了，</p>
<h1 id="手动给自增列赋值"><a href="#手动给自增列赋值" class="headerlink" title="手动给自增列赋值"></a>手动给自增列赋值</h1><p>在insert的时候，手动给自增列赋值，也是可以的，<br>手动赋值后，我们再插入的时候，就会使用当前自增序列的最大值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">mysql&gt; insert into t_book_2(id,f_name) values(9,'xx');</div><div class="line">Query OK, 1 row affected (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt; insert into t_book_2(f_name) values('yy');</div><div class="line">Query OK, 1 row affected (0.01 sec)</div><div class="line"></div><div class="line">mysql&gt; select *from t_book_2;</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">| id | f_name |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">|  1 | ee     |</div><div class="line">|  2 | ff     |</div><div class="line">|  3 | hh     |</div><div class="line">|  9 | xx     |</div><div class="line">| 10 | yy     |</div><div class="line">+<span class="comment">----+--------+</span></div><div class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure></p>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p>发现一篇好文章，讲的还不错：<a href="http://www.trueeyu.com/2016/06/21/increment-column/" target="_blank" rel="external">数据库自增列</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;自增列&lt;/p&gt;
&lt;h1 id=&quot;什么是自增列&quot;&gt;&lt;a href=&quot;#什么是自增列&quot; class=&quot;headerlink&quot; title=&quot;什么是自增列&quot;&gt;&lt;/a&gt;什么是自增列&lt;/h1&gt;&lt;p&gt;自增列就是一个自动增长的列，他没有什么业务含义，一般可能用来做主键，作为唯一标识。&lt;br&gt;自增列一般是一个整数，相比其他的UUID占用的存储更少，网络资源占用也少。如果考虑其他因素的话，UUID使用也很多。&lt;br&gt;实际应用还要考虑很多问题，不能单纯的使用&lt;/p&gt;
&lt;h1 id=&quot;自增列是使用&quot;&gt;&lt;a href=&quot;#自增列是使用&quot; class=&quot;headerlink&quot; title=&quot;自增列是使用&quot;&gt;&lt;/a&gt;自增列是使用&lt;/h1&gt;&lt;p&gt;我们可以再create table的时候，就定义好自增列&lt;br&gt;我们使用关键字 auto_increment 来指定。&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mysql&amp;gt; create table t_book_1(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    -&amp;gt; id int auto_increment,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    -&amp;gt; f_name varchar(10),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    -&amp;gt; primary key(id)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    -&amp;gt; );&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这里的话，一定要让自增列是主键，不然会报错&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-聚合函数</title>
    <link href="https://yuguiyang.github.io/2017/09/11/mysql-handbook-09/"/>
    <id>https://yuguiyang.github.io/2017/09/11/mysql-handbook-09/</id>
    <published>2017-09-11T02:00:00.000Z</published>
    <updated>2017-09-14T03:28:08.292Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>聚合函数</p>
<p>聚合函数也是函数的一种，比较常用，这里我们就单独拿出来介绍下。<br>聚合函数一般配合group by来使用，经常是用来对数据集中的数值求和、平均值啊这里类的。</p>
<h2 id="聚合函数的默认特性"><a href="#聚合函数的默认特性" class="headerlink" title="聚合函数的默认特性"></a>聚合函数的默认特性</h2><ul>
<li>忽略NULL值</li>
<li>如果没有匹配的记录，返回NULL</li>
<li>如果没有使用group by，则默认对所有字段进行group by</li>
</ul>
<h2 id="常用聚合函数"><a href="#常用聚合函数" class="headerlink" title="常用聚合函数"></a>常用聚合函数</h2><p>这里的测试数据依然使用前面的数据，可以参考前面的文章。</p>
<h3 id="count"><a href="#count" class="headerlink" title="count"></a>count</h3><p>统计结果集的数量,没有结果时，返回0<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 我们以学生表为例，来统计每个班级的学生人数</span></div><div class="line"></div><div class="line"><span class="keyword">select</span> </div><div class="line">    c_id,<span class="keyword">count</span>(<span class="number">1</span>),</div><div class="line">    <span class="keyword">count</span>(s_id),</div><div class="line">    <span class="comment">-- 这里学生ID是唯一的，所以是否使用distinct是一样的</span></div><div class="line">    <span class="keyword">count</span>(<span class="keyword">distinct</span> s_id),</div><div class="line">    <span class="comment">-- 统计班级的个数</span></div><div class="line">    <span class="keyword">count</span>(<span class="keyword">distinct</span> c_id)</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student </div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">    c_id;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-75e0809e902bed73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="count"></p>
<a id="more"></a>
<p>当我们只使用count，不使用group by的时候，相当于对所有字段进行group by<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    <span class="keyword">count</span>(<span class="number">1</span>)</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student</div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-0936e61df32f5745.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="count without group by "></p>
<p>这里，我们再来看下count对于null值得处理<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    <span class="comment">-- count(*),是包括null值的</span></div><div class="line">    <span class="keyword">count</span>(*),</div><div class="line">    <span class="comment">-- count(1),也包括null值</span></div><div class="line">    <span class="keyword">count</span>(<span class="number">1</span>),</div><div class="line">    <span class="comment">-- 指定字段的时候，是不包括null值的</span></div><div class="line">    <span class="keyword">count</span>(<span class="keyword">id</span>),</div><div class="line">    <span class="comment">-- 同样也不包括null值</span></div><div class="line">    <span class="keyword">count</span>(<span class="keyword">DISTINCT</span> <span class="keyword">id</span>)</div><div class="line"><span class="keyword">from</span> (</div><div class="line">    <span class="keyword">select</span> <span class="number">1</span> <span class="keyword">as</span> <span class="keyword">id</span></div><div class="line">    <span class="keyword">union</span> <span class="keyword">select</span> <span class="literal">NULL</span></div><div class="line">    <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">2</span></div><div class="line">)x</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-2c755387122916a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="count-null"></p>
<h3 id="avg、sum"><a href="#avg、sum" class="headerlink" title="avg、sum"></a>avg、sum</h3><p>计算结果集的平局值和结果集的累加和<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 统计每个学生的平均分和总分</span></div><div class="line"><span class="keyword">select</span> </div><div class="line">    s_id,</div><div class="line">    <span class="keyword">avg</span>(score),</div><div class="line">    <span class="keyword">sum</span>(score) </div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_score</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">    s_id</div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-3e4a029bc3a97faf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="avg&amp;sum"></p>
<p>我们再来看看avg和sum对null值的处理<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    <span class="comment">-- count指定字段，是不包括null值的</span></div><div class="line">    <span class="keyword">count</span>(score),</div><div class="line">    <span class="comment">-- avg也是不包括null值的</span></div><div class="line">    <span class="keyword">avg</span>(score),</div><div class="line">    <span class="comment">-- 如果想要统计score的记录，需要使用ifnull进行判断</span></div><div class="line">    <span class="keyword">avg</span>(<span class="keyword">IFNULL</span>(score,<span class="number">0</span>)),</div><div class="line">    <span class="comment">-- 求和</span></div><div class="line">    <span class="keyword">sum</span>(score)</div><div class="line"><span class="keyword">from</span> (</div><div class="line">    <span class="keyword">select</span> <span class="number">10</span> <span class="keyword">as</span> score</div><div class="line">    <span class="keyword">union</span> <span class="keyword">select</span> <span class="literal">NULL</span></div><div class="line">    <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">20</span></div><div class="line">)x;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-744761351497d133.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="avg-with-null"></p>
<h3 id="min、max"><a href="#min、max" class="headerlink" title="min、max"></a>min、max</h3><p>统计结果集的最小值和最大值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">select</span> </div><div class="line">    s_id,</div><div class="line">    <span class="comment">-- 最低分</span></div><div class="line">    <span class="keyword">min</span>(score),</div><div class="line">    <span class="comment">-- 最高分</span></div><div class="line">    <span class="keyword">max</span>(score)</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_score</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">    s_id</div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-bdcc845786b4a896.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="min-max"></p>
<p>如果没有匹配的记录，则返回null；如果结果集中有null值，会忽略null<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">select</span> </div><div class="line">    <span class="keyword">max</span>(score),</div><div class="line">    <span class="keyword">min</span>(score)</div><div class="line"><span class="keyword">from</span> (</div><div class="line">    <span class="keyword">select</span> <span class="number">10</span> <span class="keyword">as</span> score</div><div class="line">    <span class="keyword">union</span> <span class="keyword">select</span> <span class="literal">NULL</span></div><div class="line">    <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">20</span></div><div class="line">)x;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-ae216becd745e4ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="min-max-null"></p>
<h3 id="group-concat"><a href="#group-concat" class="headerlink" title="group_concat"></a>group_concat</h3><p>group_concat会将函数聚合后的所有值以逗号分隔，以字符串展现<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">GROUP_CONCAT([DISTINCT] expr [,expr ...]</div><div class="line">             [ORDER BY &#123;unsigned_integer | col_name | expr&#125;</div><div class="line">                 [ASC | DESC] [,col_name ...]]</div><div class="line">             [SEPARATOR str_val])</div></pre></td></tr></table></figure></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    s_id,</div><div class="line">    <span class="comment">-- 将该学生所有的成绩以逗号分隔显示</span></div><div class="line">    <span class="keyword">group_concat</span>(score)</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_score</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">    s_id</div><div class="line">;</div></pre></td></tr></table></figure>
<h3 id="having"><a href="#having" class="headerlink" title="having"></a>having</h3><p>在聚合函数的使用过程中，通常还会使用having来对聚合后的数据进行过滤<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    s_id,</div><div class="line">    <span class="keyword">sum</span>(score) sum_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_score</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">    s_id</div><div class="line"><span class="comment">-- 总分大于150分</span></div><div class="line"><span class="keyword">having</span> </div><div class="line">    sum_score &gt; <span class="number">150</span></div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-c1efca915bfa8487.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="having"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;聚合函数&lt;/p&gt;
&lt;p&gt;聚合函数也是函数的一种，比较常用，这里我们就单独拿出来介绍下。&lt;br&gt;聚合函数一般配合group by来使用，经常是用来对数据集中的数值求和、平均值啊这里类的。&lt;/p&gt;
&lt;h2 id=&quot;聚合函数的默认特性&quot;&gt;&lt;a href=&quot;#聚合函数的默认特性&quot; class=&quot;headerlink&quot; title=&quot;聚合函数的默认特性&quot;&gt;&lt;/a&gt;聚合函数的默认特性&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;忽略NULL值&lt;/li&gt;
&lt;li&gt;如果没有匹配的记录，返回NULL&lt;/li&gt;
&lt;li&gt;如果没有使用group by，则默认对所有字段进行group by&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;常用聚合函数&quot;&gt;&lt;a href=&quot;#常用聚合函数&quot; class=&quot;headerlink&quot; title=&quot;常用聚合函数&quot;&gt;&lt;/a&gt;常用聚合函数&lt;/h2&gt;&lt;p&gt;这里的测试数据依然使用前面的数据，可以参考前面的文章。&lt;/p&gt;
&lt;h3 id=&quot;count&quot;&gt;&lt;a href=&quot;#count&quot; class=&quot;headerlink&quot; title=&quot;count&quot;&gt;&lt;/a&gt;count&lt;/h3&gt;&lt;p&gt;统计结果集的数量,没有结果时，返回0&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 我们以学生表为例，来统计每个班级的学生人数&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    c_id,&lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(s_id),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;-- 这里学生ID是唯一的，所以是否使用distinct是一样的&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;distinct&lt;/span&gt; s_id),&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;-- 统计班级的个数&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;distinct&lt;/span&gt; c_id)&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    t_student &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    c_id;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-75e0809e902bed73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;count&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-子查询的使用</title>
    <link href="https://yuguiyang.github.io/2017/09/11/mysql-handbook-08/"/>
    <id>https://yuguiyang.github.io/2017/09/11/mysql-handbook-08/</id>
    <published>2017-09-11T01:00:00.000Z</published>
    <updated>2017-09-14T01:18:39.737Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>变量的使用</p>
<h2 id="什么是子查询"><a href="#什么是子查询" class="headerlink" title="什么是子查询"></a>什么是子查询</h2><p>子查询是将一个 SELECT 语句的查询结果作为中间结果，供另一个 SQL 语句调用。<br>像这样：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 我们将学生表中的所有班级ID当做中间结果</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_class <span class="keyword">where</span> c_id <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> c_id <span class="keyword">from</span> t_student);</div></pre></td></tr></table></figure></p>
<h2 id="常用比较符"><a href="#常用比较符" class="headerlink" title="常用比较符"></a>常用比较符</h2><p>子查询最常用的用法：</p>
<blockquote>
<p>non_subquery_operand comparison_operator (subquery)<br>其中操作符通常为<br>=  &gt;  &lt;  &gt;=  &lt;=  &lt;&gt;  !=  &lt;=&gt;</p>
</blockquote>
<p>其他的都不说了，这里说下这个&lt;=&gt;,以前还真没用过<br>&lt;=&gt;和=比较类似，也是判断是否相等，相等返回1，不相等返回2<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select 1&lt;=&gt;1,1&lt;=&gt;2;</div><div class="line">+<span class="comment">-------+-------+</span></div><div class="line">| 1&lt;=&gt;1 | 1&lt;=&gt;2 |</div><div class="line">+<span class="comment">-------+-------+</span></div><div class="line">|     1 |     0 |</div><div class="line">+<span class="comment">-------+-------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt; <span class="keyword">select</span> <span class="number">1</span>=<span class="number">1</span>,<span class="number">1</span>=<span class="number">2</span>;</div><div class="line">+<span class="comment">-----+-----+</span></div><div class="line">| 1=1 | 1=2 |</div><div class="line">+<span class="comment">-----+-----+</span></div><div class="line">|   1 |   0 |</div><div class="line">+<span class="comment">-----+-----+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<p>和=不一样的地方，是对NULL的支持，用&lt;=&gt;可以判断是否为null，而等号则是出现null，结果就为null<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select 1&lt;=&gt;null,null&lt;=&gt;null,1=null,null=null;</div><div class="line">+<span class="comment">----------+-------------+--------+-----------+</span></div><div class="line">| 1&lt;=&gt;null | null&lt;=&gt;null | 1=null | null=null |</div><div class="line">+<span class="comment">----------+-------------+--------+-----------+</span></div><div class="line">|        0 |           1 | NULL   | NULL      |</div><div class="line">+<span class="comment">----------+-------------+--------+-----------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h3 id="any、in、some"><a href="#any、in、some" class="headerlink" title="any、in、some"></a>any、in、some</h3><p>在子查询中，in平时用的比较多，这个any、some，这里简单说下any和some</p>
<blockquote>
<p>operand comparison_operator ANY (subquery)<br>operand comparison_operator SOME (subquery)<br><figure class="highlight plain"><figcaption><span>可以为 =  >  <  >=  <= <="">  != ```</=></span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">any表示任意一个值，比如</div><div class="line">\&gt; any () :表示大于any中任意一个值，即&gt;子查询中最小值</div><div class="line">&lt; any(): 表示小于any中任意一个值，即&lt;子查询中最大值</div><div class="line">= any(): 和in一样</div><div class="line">&lt;&gt; any():比较好玩儿，如果子查询返回多个值，&lt;&gt; any会返回所有值</div><div class="line"></div><div class="line">``` sql</div><div class="line">select *from t_student </div><div class="line">where s_id &gt; any(</div><div class="line">    select s_id from t_student where s_id in (105,109,111)</div><div class="line">);</div></pre></td></tr></table></figure></p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-84ca84a9cea73689.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&gt;any"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student </div><div class="line"><span class="keyword">where</span> s_id = <span class="keyword">any</span>(</div><div class="line">    <span class="keyword">select</span> s_id <span class="keyword">from</span> t_student <span class="keyword">where</span> s_id <span class="keyword">in</span> (<span class="number">105</span>,<span class="number">109</span>,<span class="number">111</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-79acd1b91a2fb372.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="=any"></p>
<p>some 和any是一样的就不多说了</p>
<h3 id="all"><a href="#all" class="headerlink" title="all"></a>all</h3><p>这个all我也没咋用过，all表示所有值，和any有点儿相反的意思</p>
<blockquote>
<p>operand comparison_operator ALL (subquery)</p>
</blockquote>
<p>> all ()：表示大于所有值，即&gt;子查询中最大值<br>&lt; all() : 表示小于所有值，即&lt; 子查询中的最小值<br>= all(): 返回单个值时和=一样，返回多个值时貌似没啥用<br>&lt;&gt; all(): 和not in 一样</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student </div><div class="line"><span class="keyword">where</span> s_id &gt; all(</div><div class="line">    <span class="keyword">select</span> s_id <span class="keyword">from</span> t_student <span class="keyword">where</span> s_id <span class="keyword">in</span> (<span class="number">105</span>,<span class="number">109</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-8f0ce33bafb39e86.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="&gt;all"></p>
<h2 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h2><p>这种情况下，子查询返回单个值，可以在任何地方使用它。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span></div><div class="line">    c_id,</div><div class="line">    c_name,</div><div class="line">    (<span class="keyword">select</span> <span class="keyword">max</span>(s_id) <span class="keyword">from</span> t_student) <span class="keyword">as</span> max_s_id</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_class;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">select</span></div><div class="line">    *</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_class </div><div class="line"><span class="keyword">where</span> </div><div class="line">    c_id = (<span class="keyword">select</span> <span class="keyword">max</span>(c_id) <span class="keyword">from</span> t_class);</div></pre></td></tr></table></figure></p>
<h2 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h2><p>上面我们介绍的子查询，都是返回1列多行，行子查询的话，是返回1行多列<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查询一班所有男生</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student</div><div class="line"><span class="keyword">where</span> (c_id,s_gender) = (<span class="number">901</span>,<span class="number">0</span>);</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-f925380b1f971526.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="行子查询"></p>
<p>这里也可以返回多行多列（也叫做表子查询）<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student</div><div class="line"><span class="keyword">where</span> (c_id,s_gender) <span class="keyword">in</span> (<span class="keyword">select</span> <span class="number">901</span>,<span class="number">0</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">902</span>,<span class="number">0</span>);</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-7c558cc3f28c665f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="多行多列"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>官方文档：<br><a href="https://dev.mysql.com/doc/refman/5.7/en/subqueries.html" target="_blank" rel="external">https://dev.mysql.com/doc/refman/5.7/en/subqueries.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;变量的使用&lt;/p&gt;
&lt;h2 id=&quot;什么是子查询&quot;&gt;&lt;a href=&quot;#什么是子查询&quot; class=&quot;headerlink&quot; title=&quot;什么是子查询&quot;&gt;&lt;/a&gt;什么是子查询&lt;/h2&gt;&lt;p&gt;子查询是将一个 SELECT 语句的查询结果作为中间结果，供另一个 SQL 语句调用。&lt;br&gt;像这样：&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;-- 我们将学生表中的所有班级ID当做中间结果&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; t_class &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; c_id &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;distinct&lt;/span&gt; c_id &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; t_student);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;常用比较符&quot;&gt;&lt;a href=&quot;#常用比较符&quot; class=&quot;headerlink&quot; title=&quot;常用比较符&quot;&gt;&lt;/a&gt;常用比较符&lt;/h2&gt;&lt;p&gt;子查询最常用的用法：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;non_subquery_operand comparison_operator (subquery)&lt;br&gt;其中操作符通常为&lt;br&gt;=  &amp;gt;  &amp;lt;  &amp;gt;=  &amp;lt;=  &amp;lt;&amp;gt;  !=  &amp;lt;=&amp;gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其他的都不说了，这里说下这个&amp;lt;=&amp;gt;,以前还真没用过&lt;br&gt;&amp;lt;=&amp;gt;和=比较类似，也是判断是否相等，相等返回1，不相等返回2&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mysql&amp;gt; select 1&amp;lt;=&amp;gt;1,1&amp;lt;=&amp;gt;2;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;-------+-------+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| 1&amp;lt;=&amp;gt;1 | 1&amp;lt;=&amp;gt;2 |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;-------+-------+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;|     1 |     0 |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;-------+-------+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;1 row in &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;mysql&amp;gt; &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;=&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;-----+-----+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| 1=1 | 1=2 |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;-----+-----+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;|   1 |   0 |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;-----+-----+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;1 row in &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;和=不一样的地方，是对NULL的支持，用&amp;lt;=&amp;gt;可以判断是否为null，而等号则是出现null，结果就为null&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;mysql&amp;gt; select 1&amp;lt;=&amp;gt;null,null&amp;lt;=&amp;gt;null,1=null,null=null;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;----------+-------------+--------+-----------+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;| 1&amp;lt;=&amp;gt;null | null&amp;lt;=&amp;gt;null | 1=null | null=null |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;----------+-------------+--------+-----------+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;|        0 |           1 | NULL   | NULL      |&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;+&lt;span class=&quot;comment&quot;&gt;----------+-------------+--------+-----------+&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;1 row in &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>小白学习Tableau-使用计算进行聚焦</title>
    <link href="https://yuguiyang.github.io/2017/09/10/Tableau-handbook-05/"/>
    <id>https://yuguiyang.github.io/2017/09/10/Tableau-handbook-05/</id>
    <published>2017-09-10T02:57:00.000Z</published>
    <updated>2017-09-11T09:05:50.032Z</updated>
    
    <content type="html"><![CDATA[<p>Tableau实例</p>
<h2 id="什么是聚焦"><a href="#什么是聚焦" class="headerlink" title="什么是聚焦"></a>什么是聚焦</h2><p>聚焦是一种技术，用于根据某个度量的值显示离散阈值。聚焦计算其实是一种可产生离散度量的特殊计算。</p>
<p>其实就是新构造了一个维度，这个维度将度量值进行分段，类似于年龄段这样的维度。<br>这个应用场景很多，比如我们有一个达标值，想要哪些数据达标，哪些未达标。</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="数据源"><a href="#数据源" class="headerlink" title="数据源"></a>数据源</h3><p>使用Tableau中自带的“示例-超市”，其中的订单表</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-ca3c0327cba4b659.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="数据源"></p>
<h3 id="交叉列表"><a href="#交叉列表" class="headerlink" title="交叉列表"></a>交叉列表</h3><p>我们来看每个地区，每个子类别的数量<br><img src="http://upload-images.jianshu.io/upload_images/76024-b45df3b52a76e9fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="交叉列表"></p>
<a id="more"></a>
<p>现在，我们想要实现这样的功能，就是我有一个达标值500，只有数量达到500，才达标，怎样展示最好呢？</p>
<h3 id="创建计算字段"><a href="#创建计算字段" class="headerlink" title="创建计算字段"></a>创建计算字段</h3><p>我们来创建一个计算字段，如果数量大于500则达标，否则不达标</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-ce584722a9c7cd1d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="创建计算字段"></p>
<p>然后，把他拖到颜色上</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-482bee397ffda796.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="颜色"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-2ae64b31b040e229.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="颜色图例"></p>
<p>到这里，我们就可以看到，已经按照Good、Bad来区分颜色，达标、不达标</p>
<h3 id="使用参数"><a href="#使用参数" class="headerlink" title="使用参数"></a>使用参数</h3><p>上面，我们已经达成了目的，思考下，这个达标值的问题，这个月是500，下个月可能会浮动为600或者400，但我们在代码中写死了500，不够灵活，我们就可以使用参数来控制。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-d5545f23a0bb367f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="创建参数"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-6b6e05faf29e3361.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="参数配置"></p>
<p>然后，我们修改上面的计算字段</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-424aca6d4258c774.png" alt="修改计算字段"></p>
<p>好了，最后，我们就可以动态的修改这个达标值了<br><img src="http://upload-images.jianshu.io/upload_images/76024-4b80c6002deb5858.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>官方文档：<a href="https://onlinehelp.tableau.com/current/pro/desktop/zh-cn/calculations_calculatedfields_ex2spotlighting.html" target="_blank" rel="external">示例 — 使用计算进行聚焦</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Tableau实例&lt;/p&gt;
&lt;h2 id=&quot;什么是聚焦&quot;&gt;&lt;a href=&quot;#什么是聚焦&quot; class=&quot;headerlink&quot; title=&quot;什么是聚焦&quot;&gt;&lt;/a&gt;什么是聚焦&lt;/h2&gt;&lt;p&gt;聚焦是一种技术，用于根据某个度量的值显示离散阈值。聚焦计算其实是一种可产生离散度量的特殊计算。&lt;/p&gt;
&lt;p&gt;其实就是新构造了一个维度，这个维度将度量值进行分段，类似于年龄段这样的维度。&lt;br&gt;这个应用场景很多，比如我们有一个达标值，想要哪些数据达标，哪些未达标。&lt;/p&gt;
&lt;h2 id=&quot;实例&quot;&gt;&lt;a href=&quot;#实例&quot; class=&quot;headerlink&quot; title=&quot;实例&quot;&gt;&lt;/a&gt;实例&lt;/h2&gt;&lt;h3 id=&quot;数据源&quot;&gt;&lt;a href=&quot;#数据源&quot; class=&quot;headerlink&quot; title=&quot;数据源&quot;&gt;&lt;/a&gt;数据源&lt;/h3&gt;&lt;p&gt;使用Tableau中自带的“示例-超市”，其中的订单表&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-ca3c0327cba4b659.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;数据源&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;交叉列表&quot;&gt;&lt;a href=&quot;#交叉列表&quot; class=&quot;headerlink&quot; title=&quot;交叉列表&quot;&gt;&lt;/a&gt;交叉列表&lt;/h3&gt;&lt;p&gt;我们来看每个地区，每个子类别的数量&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-b45df3b52a76e9fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;交叉列表&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Tableau" scheme="https://yuguiyang.github.io/categories/Tableau/"/>
    
    
      <category term="数据可视化" scheme="https://yuguiyang.github.io/tags/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    
      <category term="Tableau" scheme="https://yuguiyang.github.io/tags/Tableau/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-变量的使用</title>
    <link href="https://yuguiyang.github.io/2017/09/10/mysql-handbook-07/"/>
    <id>https://yuguiyang.github.io/2017/09/10/mysql-handbook-07/</id>
    <published>2017-09-10T01:00:00.000Z</published>
    <updated>2017-09-11T09:05:34.806Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>变量的使用</p>
<p>这里，我们简单介绍下MySQL中变量的使用</p>
<h2 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h2><p>在MySQL中，变量的作用域主要有全局变量（Global）和会话级变量（Session）<br>全局变量会影响当前server上的所有操作，而会话级变量则只会影响当前用户的会话，server上其他用户的会话不受影响</p>
<h2 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h2><p>系统变量主要涉及MySQL Server的一些配置参数，系统变量，一般会在配置文件中进行配置，或者在使用命令启动MySQL的使用去指定。<br>当然，在MySQL启动后，也可以动态的去修改系统变量（有些变量是不能动态修改的，可以修改的变量请参照官方文档）。</p>
<a id="more"></a>
<p>那我们怎样动态的修改系统变量呢？<br>可以使用</p>
<blockquote>
<p>SET GLOBAL or SET SESSION<br>@@global. | @@session.</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> max_connections = <span class="number">1000</span>;</div><div class="line"><span class="keyword">SET</span> @@global.max_connections = <span class="number">1000</span>;</div><div class="line"></div><div class="line"><span class="keyword">SET</span> <span class="keyword">SESSION</span> sql_mode = <span class="string">'TRADITIONAL'</span>;</div><div class="line"><span class="keyword">SET</span> @@session.sql_mode = <span class="string">'TRADITIONAL'</span>;</div><div class="line"><span class="keyword">SET</span> @@sql_mode = <span class="string">'TRADITIONAL'</span>;</div></pre></td></tr></table></figure>
<p>查看当前系统变量的值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span>;</div><div class="line"></div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'max_join_size'</span>;</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">SESSION</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'max_join_size'</span>;</div><div class="line"></div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'%size%'</span>;</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">'%size%'</span>;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-1bf110200938645e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="查看系统变量"></p>
<h2 id="用户自定义变量"><a href="#用户自定义变量" class="headerlink" title="用户自定义变量"></a>用户自定义变量</h2><p>我们可以定义自己的变量，变量名为 @var_name，用户自定义变量都是会话级的</p>
<blockquote>
<p>SET @var_name = expr [, @var_name = expr] …<br>For <a href="https://dev.mysql.com/doc/refman/5.7/en/set-variable.html" target="_blank" rel="external">SET</a>, either = or := can be used as the assignment operator.</p>
</blockquote>
<p>我们也可以使用select来使用变量，或者给变量赋值，但必须使用:=<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SET @t1=1, @t2=2, @t3:=4;</div><div class="line">Query OK, 0 rows affected</div><div class="line"></div><div class="line">mysql&gt; SELECT @t1, @t2, @t3, @t4 := @t1+@t2+@t3;</div><div class="line">+<span class="comment">-----+-----+-----+--------------------+</span></div><div class="line">| @t1 | @t2 | @t3 | @t4 := @t1+@t2+@t3 |</div><div class="line">+<span class="comment">-----+-----+-----+--------------------+</span></div><div class="line">|   1 |   2 |   4 |                  7 |</div><div class="line">+<span class="comment">-----+-----+-----+--------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<p>在使用自定义变量的时候，会有一个顺序的问题，<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">set</span> @p_rank:= <span class="number">0</span>;</div><div class="line"><span class="keyword">select</span> *,@p_rank,@p_rank:=@p_rank+<span class="number">1</span> <span class="keyword">from</span> t_student;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-bb63e57e5a243008.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="变量顺序"></p>
<p>这样虽然可以得到我们想要的结果，但是官方并不推荐</p>
<p>自定义变量，是在结果返回到客户端时，才进行处理的，所以我们HAVING, GROUP BY, or ORDER BY中使用的时候，并没有效果。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>官方文档：<br><a href="https://dev.mysql.com/doc/refman/5.7/en/user-variables.html" target="_blank" rel="external">user-variables</a><br><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html" target="_blank" rel="external">server-system-variables</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;变量的使用&lt;/p&gt;
&lt;p&gt;这里，我们简单介绍下MySQL中变量的使用&lt;/p&gt;
&lt;h2 id=&quot;变量的作用域&quot;&gt;&lt;a href=&quot;#变量的作用域&quot; class=&quot;headerlink&quot; title=&quot;变量的作用域&quot;&gt;&lt;/a&gt;变量的作用域&lt;/h2&gt;&lt;p&gt;在MySQL中，变量的作用域主要有全局变量（Global）和会话级变量（Session）&lt;br&gt;全局变量会影响当前server上的所有操作，而会话级变量则只会影响当前用户的会话，server上其他用户的会话不受影响&lt;/p&gt;
&lt;h2 id=&quot;系统变量&quot;&gt;&lt;a href=&quot;#系统变量&quot; class=&quot;headerlink&quot; title=&quot;系统变量&quot;&gt;&lt;/a&gt;系统变量&lt;/h2&gt;&lt;p&gt;系统变量主要涉及MySQL Server的一些配置参数，系统变量，一般会在配置文件中进行配置，或者在使用命令启动MySQL的使用去指定。&lt;br&gt;当然，在MySQL启动后，也可以动态的去修改系统变量（有些变量是不能动态修改的，可以修改的变量请参照官方文档）。&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-常用函数</title>
    <link href="https://yuguiyang.github.io/2017/09/10/mysql-handbook-06/"/>
    <id>https://yuguiyang.github.io/2017/09/10/mysql-handbook-06/</id>
    <published>2017-09-10T00:00:00.000Z</published>
    <updated>2017-09-11T05:36:08.290Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>常用函数</p>
<p>这里介绍下，MySQL中常用的函数，函数有太多太多，不一定都需要记住，只需要有个印象，需要的时候去文档中找一下，记住一些常用的就好了</p>
<h2 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h2><h3 id="abs-x"><a href="#abs-x" class="headerlink" title="abs(x)"></a>abs(x)</h3><p>返回x的绝对值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">abs</span>(<span class="number">-10</span>),<span class="keyword">abs</span>(<span class="number">10</span>)</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-5a4d7d49d66d09b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="abs"></p>
<a id="more"></a>
<h3 id="ceil-x-、ceiling-x"><a href="#ceil-x-、ceiling-x" class="headerlink" title="ceil(x)、ceiling(x)"></a>ceil(x)、ceiling(x)</h3><p>向上取整,比该值大的第一个整数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">CEIL</span>(<span class="number">9.3</span>),<span class="keyword">CEIL</span>(<span class="number">9.5</span>),<span class="keyword">CEIL</span>(<span class="number">9.6</span>),<span class="keyword">CEIL</span>(<span class="number">-9.5</span>),<span class="keyword">CEIL</span>(<span class="number">-9.1</span>)</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-3106d7b4937de867.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ceil"></p>
<h3 id="floor-x"><a href="#floor-x" class="headerlink" title="floor(x)"></a>floor(x)</h3><p>向下取整，比该值小的第一个整数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">FLOOR</span>(<span class="number">9.3</span>),<span class="keyword">FLOOR</span>(<span class="number">9.5</span>),<span class="keyword">FLOOR</span>(<span class="number">9.6</span>),<span class="keyword">FLOOR</span>(<span class="number">-9.5</span>),<span class="keyword">FLOOR</span>(<span class="number">-9.1</span>)</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-52ccb9f3d6295929.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="floor"></p>
<h3 id="round-x-round-x-y"><a href="#round-x-round-x-y" class="headerlink" title="round(x),round(x,y)"></a>round(x),round(x,y)</h3><p>四舍五入，round(x)，最近的一个整数，round(x,y)，这个y可以指定精度</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">ROUND</span>(<span class="number">9.3</span>),<span class="keyword">ROUND</span>(<span class="number">9.6</span>),<span class="keyword">ROUND</span>(<span class="number">9.378</span>,<span class="number">2</span>),<span class="keyword">ROUND</span>(<span class="number">9.455</span>,<span class="number">2</span>)</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-d46d1e49943ffec7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="round"></p>
<h3 id="rand-rand-x"><a href="#rand-rand-x" class="headerlink" title="rand(),rand(x)"></a>rand(),rand(x)</h3><p>rand() 返回0~1之间的随机数<br>rand(x) 返回0~1之间的随机数，如果x值相等，则返回值相等</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> <span class="keyword">RAND</span>(),<span class="keyword">RAND</span>(),<span class="keyword">RAND</span>(<span class="number">10</span>),<span class="keyword">RAND</span>(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-80978f1eb1fd9dfa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="rand"></p>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><h3 id="获取字符串长度"><a href="#获取字符串长度" class="headerlink" title="获取字符串长度"></a>获取字符串长度</h3><p> length(str)，返回str的长度,这里要注意下中文，占3个长度,这里的长度单位是bytes<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select length('abc'),length('中国'),length('hi中国');</div><div class="line">+<span class="comment">---------------+----------------+------------------+</span></div><div class="line">| length('abc') | length('中国') | length('hi中国') |</div><div class="line">+<span class="comment">---------------+----------------+------------------+</span></div><div class="line">|             3 |              6 |                8 |</div><div class="line">+<span class="comment">---------------+----------------+------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<p> CHAR_LENGTH(str)，返回str的长度，中文和英文一样，占1个字符，这里长度单位是字符<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select char_length('abc'),char_length('中国'),char_length('hi中国');</div><div class="line">+<span class="comment">--------------------+---------------------+-----------------------+</span></div><div class="line">| char_length('abc') | char_length('中国') | char_length('hi中国') |</div><div class="line">+<span class="comment">--------------------+---------------------+-----------------------+</span></div><div class="line">|                  3 |                   2 |                     4 |</div><div class="line">+<span class="comment">--------------------+---------------------+-----------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<h3 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h3><p>CONCAT(str1,str2,…)，将str1，str2拼接在一起<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">mysql&gt; select concat('h','e','gogo','中国');</div><div class="line">+<span class="comment">-------------------------------+</span></div><div class="line">| concat('h','e','gogo','中国') |</div><div class="line">+<span class="comment">-------------------------------+</span></div><div class="line">| hegogo中国                    |</div><div class="line">+<span class="comment">-------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<p>这里要注意下NULL，如果其中有参数为NULL，则结果为NULL<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select concat('h','e','gogo',NULL,'中国');</div><div class="line">+<span class="comment">------------------------------------+</span></div><div class="line">| concat('h','e','gogo',NULL,'中国') |</div><div class="line">+<span class="comment">------------------------------------+</span></div><div class="line">| NULL                               |</div><div class="line">+<span class="comment">------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<p>CONCAT_WS(separator,str1,str2,…)，使用指定的separator进行拼接<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select concat_ws('^','e','gogo',NULL,'中国');</div><div class="line">+<span class="comment">---------------------------------------+</span></div><div class="line">| concat_ws('^','e','gogo',NULL,'中国') |</div><div class="line">+<span class="comment">---------------------------------------+</span></div><div class="line">| e^gogo^中国                           |</div><div class="line">+<span class="comment">---------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<p>这里是如果有NULL，对结果是没有影响的，会直接忽略NULL值</p>
<h3 id="剔除空格或指定字符"><a href="#剔除空格或指定字符" class="headerlink" title="剔除空格或指定字符"></a>剔除空格或指定字符</h3><p>剔除字符串左右的空格<br>ltrim(str),剔除左侧空格<br>rtrim(str),剔除右侧空格<br>TRIM([{BOTH | LEADING | TRAILING} [remstr] FROM] str), TRIM([remstr FROM] str)<br>trim可以使用参数来控制剔除空格或者是指定的remstr，默认是空格<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select concat(ltrim('   hi   '),'oo'),concat(rtrim('   hi   '),'oo'),concat(trim('   hi   '),'oo');</div><div class="line">+<span class="comment">--------------------------------+--------------------------------+-------------------------------+</span></div><div class="line">| concat(ltrim('   hi   '),'oo') | concat(rtrim('   hi   '),'oo') | concat(trim('   hi   '),'oo') |</div><div class="line">+<span class="comment">--------------------------------+--------------------------------+-------------------------------+</span></div><div class="line">| hi   oo                        |    hioo                        | hioo                          |</div><div class="line">+<span class="comment">--------------------------------+--------------------------------+-------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">trim</span>(<span class="string">'a'</span> <span class="keyword">from</span> <span class="string">'aabbbccaa'</span>),<span class="keyword">trim</span>(<span class="keyword">leading</span> <span class="string">'a'</span> <span class="keyword">from</span> <span class="string">'aabbbccaa'</span>),<span class="keyword">trim</span>(trailing <span class="string">'a'</span> <span class="keyword">from</span> <span class="string">'aabbbccaa'</span>);</div><div class="line">+<span class="comment">----------------------------+------------------------------------+-------------------------------------+</span></div><div class="line">| trim('a' from 'aabbbccaa') | trim(leading 'a' from 'aabbbccaa') | trim(trailing 'a' from 'aabbbccaa') |</div><div class="line">+<span class="comment">----------------------------+------------------------------------+-------------------------------------+</span></div><div class="line">| bbbcc                      | bbbccaa                            | aabbbcc                             |</div><div class="line">+<span class="comment">----------------------------+------------------------------------+-------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<h3 id="字符串填充"><a href="#字符串填充" class="headerlink" title="字符串填充"></a>字符串填充</h3><p>LPAD(str,len,padstr)，左侧填充<br>RPAD(str,len,padstr)，右侧填充<br>len是指定str的长度，如果不够，则使用padstr填充，如果超了，则进行截取<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select lpad('hi',6,'@'),lpad('higogo',4,'@'),rpad('hi',6,'@'),rpad('higogo',4,'@');</div><div class="line">+<span class="comment">------------------+----------------------+------------------+----------------------+</span></div><div class="line">| lpad('hi',6,'@') | lpad('higogo',4,'@') | rpad('hi',6,'@') | rpad('higogo',4,'@') |</div><div class="line">+<span class="comment">------------------+----------------------+------------------+----------------------+</span></div><div class="line">| @@@@hi           | higo                 | hi@@@@           | higo                 |</div><div class="line">+<span class="comment">------------------+----------------------+------------------+----------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<h3 id="字符串截取"><a href="#字符串截取" class="headerlink" title="字符串截取"></a>字符串截取</h3><p>LEFT(str,len)，从左侧开始截取len个字符<br>RIGHT(str,len)，从右侧截取len个字符<br>SUBSTR(str,pos), SUBSTR(str FROM pos), SUBSTR(str,pos,len), SUBSTR(str FROM pos FOR len)，从指定pos开始截取len个字符<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select left('hello',1),left('hello',3),right('hello',3);</div><div class="line">+<span class="comment">-----------------+-----------------+------------------+</span></div><div class="line">| left('hello',1) | left('hello',3) | right('hello',3) |</div><div class="line">+<span class="comment">-----------------+-----------------+------------------+</span></div><div class="line">| h               | hel             | llo              |</div><div class="line">+<span class="comment">-----------------+-----------------+------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'hello'</span>,<span class="number">1</span>),<span class="keyword">substr</span>(<span class="string">'hello'</span>,<span class="number">2</span>),<span class="keyword">substr</span>(<span class="string">'hello'</span> <span class="keyword">from</span> <span class="number">2</span>);</div><div class="line">+<span class="comment">-------------------+-------------------+------------------------+</span></div><div class="line">| substr('hello',1) | substr('hello',2) | substr('hello' from 2) |</div><div class="line">+<span class="comment">-------------------+-------------------+------------------------+</span></div><div class="line">| hello             | ello              | ello                   |</div><div class="line">+<span class="comment">-------------------+-------------------+------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'hello'</span>,<span class="number">1</span>,<span class="number">3</span>),<span class="keyword">substr</span>(<span class="string">'hello'</span>,<span class="number">2</span>,<span class="number">3</span>),<span class="keyword">substr</span>(<span class="string">'hello'</span> <span class="keyword">from</span> <span class="number">2</span> <span class="keyword">for</span> <span class="number">2</span>);</div><div class="line">+<span class="comment">---------------------+---------------------+------------------------------+</span></div><div class="line">| substr('hello',1,3) | substr('hello',2,3) | substr('hello' from 2 for 2) |</div><div class="line">+<span class="comment">---------------------+---------------------+------------------------------+</span></div><div class="line">| hel                 | ell                 | el                           |</div><div class="line">+<span class="comment">---------------------+---------------------+------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<h3 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h3><p>LOWER(str) LCASE(str)，将str转为小写<br>UPPER(str) UCASE(str)，将str转为大写<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select lower('AppLE'),lcase('AppLE'),upper('AppLE'),ucase('AppLE');</div><div class="line">+<span class="comment">----------------+----------------+----------------+----------------+</span></div><div class="line">| lower('AppLE') | lcase('AppLE') | upper('AppLE') | ucase('AppLE') |</div><div class="line">+<span class="comment">----------------+----------------+----------------+----------------+</span></div><div class="line">| apple          | apple          | APPLE          | APPLE          |</div><div class="line">+<span class="comment">----------------+----------------+----------------+----------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<h3 id="更多字符串函数"><a href="#更多字符串函数" class="headerlink" title="更多字符串函数"></a>更多字符串函数</h3><p>参考官网： <a href="https://dev.mysql.com/doc/refman/5.7/en/string-functions.html" target="_blank" rel="external">https://dev.mysql.com/doc/refman/5.7/en/string-functions.html</a></p>
<h2 id="日期和函数"><a href="#日期和函数" class="headerlink" title="日期和函数"></a>日期和函数</h2><h3 id="获取当前日期、时间"><a href="#获取当前日期、时间" class="headerlink" title="获取当前日期、时间"></a>获取当前日期、时间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">CURRENT_DATE</span>,<span class="keyword">CURRENT_DATE</span>(),<span class="keyword">CURRENT_TIME</span>,<span class="keyword">CURRENT_TIME</span>(),<span class="keyword">CURRENT_TIMESTAMP</span>(),<span class="keyword">NOW</span>()</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-d02a125fbe334c51.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="当前日期、时间"></p>
<h3 id="时间戳相关函数"><a href="#时间戳相关函数" class="headerlink" title="时间戳相关函数"></a>时间戳相关函数</h3><p>UNIX_TIMESTAMP() 返回当前时间的时间戳，<br>UNIX_TIMESTAMP(x) 返回指定日期的时间戳<br>FROM_UNIXTIME(x) 将时间戳转为日期<br>FROM_UNIXTIME(x,y) 将时间戳转为指定格式的日期</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select UNIX_TIMESTAMP(),UNIX_TIMESTAMP('2017-09-10');</div><div class="line">+<span class="comment">------------------+------------------------------+</span></div><div class="line">| UNIX_TIMESTAMP() | UNIX_TIMESTAMP('2017-09-10') |</div><div class="line">+<span class="comment">------------------+------------------------------+</span></div><div class="line">|       1505096065 |                   1504972800 |</div><div class="line">+<span class="comment">------------------+------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt; <span class="keyword">select</span> FROM_UNIXTIME(<span class="number">1505096033</span>),FROM_UNIXTIME(<span class="number">1504972800</span>),FROM_UNIXTIME(<span class="number">1505096033</span>,<span class="string">'%Y-%m-%d'</span>);</div><div class="line">+<span class="comment">---------------------------+---------------------------+--------------------------------------+</span></div><div class="line">| FROM_UNIXTIME(1505096033) | FROM_UNIXTIME(1504972800) | FROM_UNIXTIME(1505096033,'%Y-%m-%d') |</div><div class="line">+<span class="comment">---------------------------+---------------------------+--------------------------------------+</span></div><div class="line">| 2017-09-11 10:13:53       | 2017-09-10 00:00:00       | 2017-09-11                           |</div><div class="line">+<span class="comment">---------------------------+---------------------------+--------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<h3 id="extract"><a href="#extract" class="headerlink" title="extract"></a>extract</h3><p>EXTRACT(unit FROM date)<br>返回日期/时间的单独部分，比如年、月、日、小时、分钟等等<br>date 参数是合法的日期表达式。unit 参数可以是下列的值：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-9db81fd5fd206620.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="extract"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select extract(YEAR FROM NOW()),extract(MONTH from now()),extract(HOUR from now());</div><div class="line">+<span class="comment">--------------------------+---------------------------+--------------------------+</span></div><div class="line">| extract(YEAR FROM NOW()) | extract(MONTH from now()) | extract(HOUR from now()) |</div><div class="line">+<span class="comment">--------------------------+---------------------------+--------------------------+</span></div><div class="line">|                     2017 |                         9 |                       10 |</div><div class="line">+<span class="comment">--------------------------+---------------------------+--------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<h3 id="datediff、timediff、timestampdiff"><a href="#datediff、timediff、timestampdiff" class="headerlink" title="datediff、timediff、timestampdiff"></a>datediff、timediff、timestampdiff</h3><p>datediff(<em>expr1</em>,<em>expr2</em>),获取2个日期相差的天数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select datediff('2017-09-11 10:00:00','2017-09-08 00:00:00');</div><div class="line">+<span class="comment">-------------------------------------------------------+</span></div><div class="line">| datediff('2017-09-11 10:00:00','2017-09-08 00:00:00') |</div><div class="line">+<span class="comment">-------------------------------------------------------+</span></div><div class="line">|                                                     3 |</div><div class="line">+<span class="comment">-------------------------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>TIMEDIFF(<em>expr1</em>,<em>expr2</em>)，返回expr1-expr2的时间差<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select timediff('2017-09-11 10:00:00','2017-09-08 00:00:00');</div><div class="line">+<span class="comment">-------------------------------------------------------+</span></div><div class="line">| timediff('2017-09-11 10:00:00','2017-09-08 00:00:00') |</div><div class="line">+<span class="comment">-------------------------------------------------------+</span></div><div class="line">| 82:00:00                                              |</div><div class="line">+<span class="comment">-------------------------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
<p>TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2)<br>返回指定unit的datetime_expr2 − datetime_expr1时间差<br>unit可以是MICROSECOND (microseconds), SECOND, MINUTE, HOUR, DAY, WEEK, MONTH, QUARTER, or YEAR.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select timestampdiff(DAY,'2017-09-11 10:00:00','2017-09-08 00:00:00');</div><div class="line">+<span class="comment">----------------------------------------------------------------+</span></div><div class="line">| timestampdiff(DAY,'2017-09-11 10:00:00','2017-09-08 00:00:00') |</div><div class="line">+<span class="comment">----------------------------------------------------------------+</span></div><div class="line">|                                                             -3 |</div><div class="line">+<span class="comment">----------------------------------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">timestampdiff</span>(<span class="keyword">HOUR</span>,<span class="string">'2017-09-11 10:00:00'</span>,<span class="string">'2017-09-08 00:00:00'</span>);</div><div class="line">+<span class="comment">-----------------------------------------------------------------+</span></div><div class="line">| timestampdiff(HOUR,'2017-09-11 10:00:00','2017-09-08 00:00:00') |</div><div class="line">+<span class="comment">-----------------------------------------------------------------+</span></div><div class="line">|                                                             -82 |</div><div class="line">+<span class="comment">-----------------------------------------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="时间加减函数"><a href="#时间加减函数" class="headerlink" title="时间加减函数"></a>时间加减函数</h3><p>对日期进行加减操作，有很多方法可以使用，最简单的是直接使用interval<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select now(),now() + interval 3 DAY,now()+interval 1 Hour;</div><div class="line">+<span class="comment">---------------------+------------------------+-----------------------+</span></div><div class="line">| now()               | now() + interval 3 DAY | now()+interval 1 Hour |</div><div class="line">+<span class="comment">---------------------+------------------------+-----------------------+</span></div><div class="line">| 2017-09-11 10:57:18 | 2017-09-14 10:57:18    | 2017-09-11 11:57:18   |</div><div class="line">+<span class="comment">---------------------+------------------------+-----------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<p>当然也可使用提供的函数</p>
<blockquote>
<p>ADDDATE(date,INTERVAL expr unit), ADDDATE(expr,days)<br>DATE_ADD(date,INTERVAL expr unit), DATE_SUB(date,INTERVAL expr unit)</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-7aa2e3a9f08f3d65.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="日期加减"><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select now(),date_add(now(),interval 1 Day),adddate(now(),interval 3 Hour);</div><div class="line">+<span class="comment">---------------------+--------------------------------+--------------------------------+</span></div><div class="line">| now()               | date_add(now(),interval 1 Day) | adddate(now(),interval 3 Hour) |</div><div class="line">+<span class="comment">---------------------+--------------------------------+--------------------------------+</span></div><div class="line">| 2017-09-11 10:59:09 | 2017-09-12 10:59:09            | 2017-09-11 13:59:09            |</div><div class="line">+<span class="comment">---------------------+--------------------------------+--------------------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div></pre></td></tr></table></figure></p>
<h3 id="更多日期、时间函数"><a href="#更多日期、时间函数" class="headerlink" title="更多日期、时间函数"></a>更多日期、时间函数</h3><p>参考官方介绍: <a href="https:
//dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html" target="_blank" rel="external">https://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html</a></p>
<h2 id="条件判断函数"><a href="#条件判断函数" class="headerlink" title="条件判断函数"></a>条件判断函数</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><blockquote>
<p>if(expr,v1,v2)<br>如果expr为真，则返回v1，为假，则返回v2<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select if(1&gt;0,'ok','no'),if(1=0,'ok','no');</div><div class="line">+<span class="comment">-------------------+-------------------+</span></div><div class="line">| if(1&gt;0,'ok','no') | if(1=0,'ok','no') |</div><div class="line">+<span class="comment">-------------------+-------------------+</span></div><div class="line">| ok                | no                |</div><div class="line">+<span class="comment">-------------------+-------------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="ifnull"><a href="#ifnull" class="headerlink" title="ifnull"></a>ifnull</h3><blockquote>
<p>ifnull(v1,v2)<br>如果v1的值为null，则返回v2，如果v1不为null，则返回v1<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; select ifnull(99,20),ifnull(NULL,99);</div><div class="line">+<span class="comment">---------------+-----------------+</span></div><div class="line">| ifnull(99,20) | ifnull(NULL,99) |</div><div class="line">+<span class="comment">---------------+-----------------+</span></div><div class="line">|            99 |              99 |</div><div class="line">+<span class="comment">---------------+-----------------+</span></div><div class="line">1 row in <span class="keyword">set</span></div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="case-when"><a href="#case-when" class="headerlink" title="case when"></a>case when</h3><blockquote>
<p>这里可以根据多个条件来判断，在不同的情况下，返回不同的值</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    s_id,s_name,s_gender,</div><div class="line">    <span class="keyword">case</span> </div><div class="line">        <span class="keyword">when</span> s_gender=<span class="number">0</span> <span class="keyword">then</span> <span class="string">'男'</span> </div><div class="line">        <span class="keyword">when</span> s_gender=<span class="number">1</span> <span class="keyword">then</span> <span class="string">'女'</span> </div><div class="line">    <span class="keyword">end</span> gender,</div><div class="line">    s_birthday,</div><div class="line">    s_hobby,</div><div class="line">    c_id</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student</div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-019524cc95e1a303.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="case when"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;常用函数&lt;/p&gt;
&lt;p&gt;这里介绍下，MySQL中常用的函数，函数有太多太多，不一定都需要记住，只需要有个印象，需要的时候去文档中找一下，记住一些常用的就好了&lt;/p&gt;
&lt;h2 id=&quot;数学函数&quot;&gt;&lt;a href=&quot;#数学函数&quot; class=&quot;headerlink&quot; title=&quot;数学函数&quot;&gt;&lt;/a&gt;数学函数&lt;/h2&gt;&lt;h3 id=&quot;abs-x&quot;&gt;&lt;a href=&quot;#abs-x&quot; class=&quot;headerlink&quot; title=&quot;abs(x)&quot;&gt;&lt;/a&gt;abs(x)&lt;/h3&gt;&lt;p&gt;返回x的绝对值&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;-10&lt;/span&gt;),&lt;span class=&quot;keyword&quot;&gt;abs&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-5a4d7d49d66d09b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;abs&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-分组排序</title>
    <link href="https://yuguiyang.github.io/2017/09/09/mysql-handbook-05/"/>
    <id>https://yuguiyang.github.io/2017/09/09/mysql-handbook-05/</id>
    <published>2017-09-09T04:00:00.000Z</published>
    <updated>2017-09-11T09:04:45.018Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>分组排序</p>
<p>使用过其他数据库的同学，一定知道那些好用的开窗函数，像什么rank() over(),sum() over() 等等，实现一些功能的时候很好用，但是呢，MySQL中并没有这些函数，那怎样实现这些功能呢？我们可以使用MySQL中的变量来实现这个功能。</p>
<p>我们先来看第一个类型的问题，关于排序的问题</p>
<h2 id="排名"><a href="#排名" class="headerlink" title="排名"></a>排名</h2><p>就是按照指定的字段，给每一条记录分配一个行号（序号），作为他的排名<br>在postgresql中可以使用像rank() over()这样的函数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    course_name,</div><div class="line">    s_id,</div><div class="line">    score,</div><div class="line">    <span class="keyword">rank</span>() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span>) rank_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_score</div></pre></td></tr></table></figure></p>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-05-02.png-blog.photo" alt="mysql-handbook-05-02"></p>
<a id="more"></a>
<p>但在MySQL中，就没这么方便了，我们需要使用变量，来模拟实现<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    course_name,</div><div class="line">    s_id,</div><div class="line">    score,</div><div class="line">    <span class="comment">-- 根据排序规则，每条记录增加1</span></div><div class="line">    @rn:=@rn+<span class="number">1</span> <span class="keyword">as</span> rank_score</div><div class="line">    <span class="comment">-- 初始化变量@rn，从0开始</span></div><div class="line"><span class="keyword">from</span> t_score <span class="keyword">cross</span> <span class="keyword">join</span> (<span class="keyword">select</span> @rn:=<span class="number">0</span>) x</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span></div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-05-03.png-blog.photo" alt="mysql-handbook-05-03"></p>
<p>细心的同学，会发现，上面的排名会有些差别，以前2条记录为例，因为都是87，所以postgresql中排名都是1，而在MySQL中呢，依然是自增，一个1，一个2，那我们是否能让他也是2个1并列呢？</p>
<p>当然可以，我们改一下SQL<br>只要我们判断一下，当前记录的score和上一条记录的score是不是一样就可以了，那怎样才能获取上一条记录的score呢？就是增加一个变量来记录上一条记录的score<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    course_name,</div><div class="line">    s_id,</div><div class="line">    score,</div><div class="line">    @pre pre_score,</div><div class="line">    <span class="comment">-- 判断当前score是否和上一条记录的score相等，</span></div><div class="line">    <span class="comment">-- 如果相等则使用和上一条一样的排名</span></div><div class="line">    <span class="keyword">if</span>(@pre=score ,@rn:=@rn,@rn:=@rn+<span class="number">1</span>) <span class="keyword">as</span> rank_score,</div><div class="line">    @pre:=score cur_score</div><div class="line">    <span class="comment">-- 使用pre来保存上一条记录的score</span></div><div class="line"><span class="keyword">from</span> t_score <span class="keyword">cross</span> <span class="keyword">join</span> (<span class="keyword">select</span> @rn:=<span class="number">0</span>,@pre:=<span class="literal">null</span>) x</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span></div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-05-04.png-blog.photo" alt="mysql-handbook-05-04"></p>
<p>上面的排序还是有点儿问题，比如有2个第1之后，依然从第2开始，那我们能不能跳过直接从3开始呢？</p>
<p>我们回想下，最开始他的排名其实就是3，只是我们上边把它变成了2，那我们再有一个和之前一样的变量就够了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    course_name,</div><div class="line">    s_id,</div><div class="line">    score,</div><div class="line">    @pre pre_score,</div><div class="line">    @rn_1:=@rn_1+<span class="number">1</span> rank_score_1,</div><div class="line">    <span class="keyword">if</span>(@pre=score ,@rn:=@rn,@rn:=@rn_1) <span class="keyword">as</span> rank_score,</div><div class="line">    @pre:=score cur_score</div><div class="line">    </div><div class="line"><span class="keyword">from</span> t_score <span class="keyword">cross</span> <span class="keyword">join</span> (<span class="keyword">select</span> @rn:=<span class="number">0</span>,@pre:=<span class="literal">null</span>,@rn_1:=<span class="number">0</span>) x</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span></div></pre></td></tr></table></figure>
<p>我们使用@rn_1来正常记录排名，当当前记录和上一条记录的score不一样时，我们使用@rn_1的排名信息。</p>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-05-05.png-blog.photo" alt="mysql-handbook-05-05"></p>
<h2 id="分组排序"><a href="#分组排序" class="headerlink" title="分组排序"></a>分组排序</h2><p>就是给每个分组中的数据，分别进行排名<br>如果有类似rank() over()的函数<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 在postgresql中</span></div><div class="line"><span class="keyword">select</span> </div><div class="line">    course_name,</div><div class="line">    s_id,</div><div class="line">    score,</div><div class="line">    <span class="keyword">rank</span>() <span class="keyword">over</span>(<span class="keyword">partition</span> <span class="keyword">by</span> course_name <span class="keyword">order</span> <span class="keyword">by</span> score <span class="keyword">desc</span>) rank_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_score</div></pre></td></tr></table></figure></p>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-05-01.png-blog.photo" alt="mysql-handbook-05-01"></p>
<p>但在MySQL中，就没这么方便了，我们需要使用变量，来模拟实现<br>这里的思路和上面的思路一样，我们需要一个变量来保存上一条记录的课程名称，<br>如果课程名称一样，则继续排名，如果不一样，则重新开始排名<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">set</span> @rn:=<span class="number">0</span>;</div><div class="line"><span class="keyword">set</span> @pre_course:=<span class="literal">null</span>;</div><div class="line"></div><div class="line"><span class="keyword">select</span> </div><div class="line">    course_name,</div><div class="line">    s_id,</div><div class="line">    score,</div><div class="line">    <span class="keyword">if</span>(@pre_course=course_name,@rn:=@rn+<span class="number">1</span>,@rn:=<span class="number">0</span>),</div><div class="line">    @pre_course:= course_name </div><div class="line"><span class="keyword">from</span> t_score </div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> course_name,score <span class="keyword">desc</span>;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-91fb3a9a983c21d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="分组排序"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;分组排序&lt;/p&gt;
&lt;p&gt;使用过其他数据库的同学，一定知道那些好用的开窗函数，像什么rank() over(),sum() over() 等等，实现一些功能的时候很好用，但是呢，MySQL中并没有这些函数，那怎样实现这些功能呢？我们可以使用MySQL中的变量来实现这个功能。&lt;/p&gt;
&lt;p&gt;我们先来看第一个类型的问题，关于排序的问题&lt;/p&gt;
&lt;h2 id=&quot;排名&quot;&gt;&lt;a href=&quot;#排名&quot; class=&quot;headerlink&quot; title=&quot;排名&quot;&gt;&lt;/a&gt;排名&lt;/h2&gt;&lt;p&gt;就是按照指定的字段，给每一条记录分配一个行号（序号），作为他的排名&lt;br&gt;在postgresql中可以使用像rank() over()这样的函数&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    course_name,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    s_id,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    score,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;rank&lt;/span&gt;() &lt;span class=&quot;keyword&quot;&gt;over&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; score &lt;span class=&quot;keyword&quot;&gt;desc&lt;/span&gt;) rank_score&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    t_score&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-05-02.png-blog.photo&quot; alt=&quot;mysql-handbook-05-02&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-regexp</title>
    <link href="https://yuguiyang.github.io/2017/09/09/mysql-handbook-04/"/>
    <id>https://yuguiyang.github.io/2017/09/09/mysql-handbook-04/</id>
    <published>2017-09-09T04:00:00.000Z</published>
    <updated>2017-09-09T15:44:03.148Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>正则表达式</p>
<p>在前面，我们了解了like的使用，它可以做一些简单的匹配</p>
<blockquote>
<p>在like中，我们使用%来代替任意个或多个字符，_表示任意单个字符</p>
</blockquote>
<p>但在实际的应用场景中，我们可能还会需要更强大的匹配方式，比如“正则表达式”，这就需要使用regexp。</p>
<p>常用的正则表达式，更多的内容，大家可以百度下<br><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-04-01.png-blog.photo" alt="mysql-handbook-04-01"></p>
<a id="more"></a>
<p>我们就以前面的t_student表为例</p>
<h2 id="查询学生姓路或乔的学生信息"><a href="#查询学生姓路或乔的学生信息" class="headerlink" title="查询学生姓路或乔的学生信息"></a>查询学生姓路或乔的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- like </span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_name <span class="keyword">like</span> <span class="string">'路%'</span> <span class="keyword">or</span> s_name <span class="keyword">like</span> <span class="string">'乔%'</span></div><div class="line"></div><div class="line"><span class="comment">-- regexp</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_name regexp <span class="string">'^(路|乔)'</span></div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-04-02.png-blog.photo" alt="mysql-handbook-04-02"></p>
<h2 id="查询名字是以美结尾的学生信息"><a href="#查询名字是以美结尾的学生信息" class="headerlink" title="查询名字是以美结尾的学生信息"></a>查询名字是以美结尾的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_name regexp <span class="string">'美$'</span></div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-04-03.png-blog.photo" alt="mysql-handbook-04-03"></p>
<h2 id="查询学生爱好中，有吃肉的学生信息"><a href="#查询学生爱好中，有吃肉的学生信息" class="headerlink" title="查询学生爱好中，有吃肉的学生信息"></a>查询学生爱好中，有吃肉的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_hobby regexp <span class="string">'吃肉'</span></div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-04-04.png-blog.photo" alt="mysql-handbook-04-04"></p>
<h2 id="查询学生姓乔或者名字中有美字的学生信息"><a href="#查询学生姓乔或者名字中有美字的学生信息" class="headerlink" title="查询学生姓乔或者名字中有美字的学生信息"></a>查询学生姓乔或者名字中有美字的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_name regexp <span class="string">'(^乔)|美'</span></div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-04-05.png-blog.photo" alt="mysql-handbook-04-05"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>这里先整理这几个简单的例子，后续会再补充。</p>
<p>可以参考官方的文档练习：<a href="https://dev.mysql.com/doc/refman/5.7/en/regexp.html" target="_blank" rel="external">https://dev.mysql.com/doc/refman/5.7/en/regexp.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;正则表达式&lt;/p&gt;
&lt;p&gt;在前面，我们了解了like的使用，它可以做一些简单的匹配&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在like中，我们使用%来代替任意个或多个字符，_表示任意单个字符&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;但在实际的应用场景中，我们可能还会需要更强大的匹配方式，比如“正则表达式”，这就需要使用regexp。&lt;/p&gt;
&lt;p&gt;常用的正则表达式，更多的内容，大家可以百度下&lt;br&gt;&lt;img src=&quot;http://7xl61k.com1.z0.glb.clouddn.com/mysql-handbook-04-01.png-blog.photo&quot; alt=&quot;mysql-handbook-04-01&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>SQL笔试题-MySQL练习题</title>
    <link href="https://yuguiyang.github.io/2017/09/09/data-analyst-interview-sql-04/"/>
    <id>https://yuguiyang.github.io/2017/09/09/data-analyst-interview-sql-04/</id>
    <published>2017-09-09T03:00:00.000Z</published>
    <updated>2017-09-09T14:49:17.589Z</updated>
    
    <content type="html"><![CDATA[<p>SQL笔试题</p>
<blockquote>
<p>下面的SQL基于MySQL</p>
</blockquote>
<p>下面整理些MySQL学习过程中，基本的练习题，题目来源于网上及个人总结。</p>
<h2 id="测试数据"><a href="#测试数据" class="headerlink" title="测试数据"></a>测试数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</div><div class="line">	s_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'学生ID'</span>,</div><div class="line">	s_name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">comment</span> <span class="string">'学生姓名'</span>,</div><div class="line">	s_gender <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'学生性别 0-男,1-女'</span>,</div><div class="line">	s_birthday <span class="built_in">date</span> <span class="keyword">comment</span> <span class="string">'出生日期'</span>,</div><div class="line">	s_hobby <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">comment</span> <span class="string">'爱好'</span>,</div><div class="line">	c_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'班级ID'</span></div><div class="line">) <span class="keyword">comment</span> <span class="string">'学生表'</span>;</div><div class="line"></div><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_class(</div><div class="line">	c_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'班级ID'</span>,</div><div class="line">	c_name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">comment</span> <span class="string">'班级名称'</span></div><div class="line">) <span class="keyword">comment</span> <span class="string">'班级表'</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_score(</div><div class="line">	sc_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'成绩ID'</span>,</div><div class="line">	s_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'学生ID'</span>,</div><div class="line">	course_name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">comment</span> <span class="string">'课程名称'</span>,</div><div class="line">	score <span class="built_in">numeric</span>(<span class="number">10</span>,<span class="number">0</span>) <span class="keyword">comment</span> <span class="string">'成绩'</span></div><div class="line">	</div><div class="line">) <span class="keyword">comment</span> <span class="string">'成绩表'</span>;</div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span>(<span class="number">901</span>,<span class="string">'一班'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span>(<span class="number">902</span>,<span class="string">'二班'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span>(<span class="number">903</span>,<span class="string">'三班'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span>(<span class="number">905</span>,<span class="string">'五班'</span>);</div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">101</span>,<span class="string">'路飞'</span>,<span class="number">0</span>,<span class="string">'1990-01-26'</span>,<span class="string">'吃肉,睡觉'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">102</span>,<span class="string">'娜美'</span>,<span class="number">1</span>,<span class="string">'1995-10-05'</span>,<span class="string">'足球,篮球'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">103</span>,<span class="string">'乔巴'</span>,<span class="number">0</span>,<span class="string">'1992-08-11'</span>,<span class="string">'唱歌,吃肉'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">104</span>,<span class="string">'鸣人'</span>,<span class="number">0</span>,<span class="string">'1991-03-29'</span>,<span class="string">'拉面,忍术'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">105</span>,<span class="string">'卡卡西'</span>,<span class="number">1</span>,<span class="string">'1989-05-10'</span>,<span class="string">'看书,吃肉'</span>,<span class="number">902</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">106</span>,<span class="string">'乌索普'</span>,<span class="number">1</span>,<span class="string">'1988-02-02'</span>,<span class="string">'跳舞,篮球'</span>,<span class="number">902</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">107</span>,<span class="string">'乔峰'</span>,<span class="number">0</span>,<span class="string">'1990-12-12'</span>,<span class="string">'跑步,羽毛球'</span>,<span class="number">902</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">108</span>,<span class="string">'段誉'</span>,<span class="number">0</span>,<span class="string">'1990-12-13'</span>,<span class="string">'吃肉,加班'</span>,<span class="number">903</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">109</span>,<span class="string">'虚竹'</span>,<span class="number">1</span>,<span class="string">'1991-01-22'</span>,<span class="string">'看电影,旅行'</span>,<span class="number">903</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">110</span>,<span class="string">'杨过'</span>,<span class="number">0</span>,<span class="string">'2000-03-04'</span>,<span class="string">'旅行'</span>,<span class="number">903</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">111</span>,<span class="string">'令狐冲'</span>,<span class="number">0</span>,<span class="string">'1997-03-04'</span>,<span class="string">'喝酒'</span>,<span class="number">904</span>);</div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">101</span>,<span class="string">'数学'</span>,<span class="number">39</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">102</span>,<span class="string">'数学'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">3</span>,<span class="number">103</span>,<span class="string">'数学'</span>,<span class="number">54</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">4</span>,<span class="number">104</span>,<span class="string">'数学'</span>,<span class="number">38</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">5</span>,<span class="number">105</span>,<span class="string">'数学'</span>,<span class="number">70</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">6</span>,<span class="number">106</span>,<span class="string">'数学'</span>,<span class="number">15</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">7</span>,<span class="number">107</span>,<span class="string">'数学'</span>,<span class="number">75</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">8</span>,<span class="number">108</span>,<span class="string">'数学'</span>,<span class="number">84</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">9</span>,<span class="number">109</span>,<span class="string">'数学'</span>,<span class="number">87</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">10</span>,<span class="number">110</span>,<span class="string">'数学'</span>,<span class="number">67</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">11</span>,<span class="number">101</span>,<span class="string">'语文'</span>,<span class="number">73</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">12</span>,<span class="number">102</span>,<span class="string">'语文'</span>,<span class="number">71</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">13</span>,<span class="number">103</span>,<span class="string">'语文'</span>,<span class="number">82</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">14</span>,<span class="number">104</span>,<span class="string">'语文'</span>,<span class="number">83</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">15</span>,<span class="number">105</span>,<span class="string">'语文'</span>,<span class="number">36</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">16</span>,<span class="number">106</span>,<span class="string">'语文'</span>,<span class="number">87</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">17</span>,<span class="number">107</span>,<span class="string">'语文'</span>,<span class="number">74</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">18</span>,<span class="number">108</span>,<span class="string">'语文'</span>,<span class="number">19</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">19</span>,<span class="number">109</span>,<span class="string">'语文'</span>,<span class="number">29</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">20</span>,<span class="number">110</span>,<span class="string">'语文'</span>,<span class="number">26</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">21</span>,<span class="number">101</span>,<span class="string">'英语'</span>,<span class="number">55</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">22</span>,<span class="number">102</span>,<span class="string">'英语'</span>,<span class="number">24</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">23</span>,<span class="number">103</span>,<span class="string">'英语'</span>,<span class="number">38</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">24</span>,<span class="number">104</span>,<span class="string">'英语'</span>,<span class="number">82</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">25</span>,<span class="number">105</span>,<span class="string">'英语'</span>,<span class="number">12</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">26</span>,<span class="number">106</span>,<span class="string">'英语'</span>,<span class="number">15</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">27</span>,<span class="number">107</span>,<span class="string">'英语'</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">28</span>,<span class="number">108</span>,<span class="string">'英语'</span>,<span class="number">68</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">29</span>,<span class="number">109</span>,<span class="string">'英语'</span>,<span class="number">77</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">30</span>,<span class="number">110</span>,<span class="string">'英语'</span>,<span class="number">19</span>);</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="查询所有课程分数都大于50分的学生信息"><a href="#查询所有课程分数都大于50分的学生信息" class="headerlink" title="查询所有课程分数都大于50分的学生信息"></a>查询所有课程分数都大于50分的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	*</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_student </div><div class="line"><span class="keyword">where</span> </div><div class="line">	s_id <span class="keyword">in</span> (</div><div class="line">		<span class="comment">-- 按学生ID分组，看每个学生的最低分数是否大于50分</span></div><div class="line">		<span class="keyword">select</span> </div><div class="line">			s_id</div><div class="line">		<span class="keyword">from</span> </div><div class="line">			t_score </div><div class="line">		<span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">			s_id </div><div class="line">		<span class="keyword">having</span> </div><div class="line">			<span class="keyword">min</span>(score)&gt;=<span class="number">50</span></div><div class="line">);</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-03.png-blog.photo" alt="data-analyst-interview-sql-04-03"></p>
<h2 id="换另一种方式，实现上一题"><a href="#换另一种方式，实现上一题" class="headerlink" title="换另一种方式，实现上一题"></a>换另一种方式，实现上一题</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	*</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_student </div><div class="line"><span class="keyword">where</span> </div><div class="line">	s_id <span class="keyword">not</span> <span class="keyword">in</span> (</div><div class="line">		<span class="comment">-- 查询分数小于50分的学生ID</span></div><div class="line">		<span class="keyword">select</span> s_id <span class="keyword">from</span> t_score <span class="keyword">where</span> score &lt; <span class="number">50</span></div><div class="line">) <span class="keyword">and</span> s_id <span class="keyword">in</span> (</div><div class="line">		<span class="comment">-- 加上这个判断，是因为有的学生没有考试成绩</span></div><div class="line">		<span class="keyword">select</span> s_id <span class="keyword">from</span> t_score</div><div class="line">);</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-03.png-blog.photo" alt="data-analyst-interview-sql-04-03"></p>
<h2 id="查询最少有2门课程都-gt-60分的学生信息"><a href="#查询最少有2门课程都-gt-60分的学生信息" class="headerlink" title="查询最少有2门课程都&gt;=60分的学生信息"></a>查询最少有2门课程都&gt;=60分的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	*</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_student </div><div class="line"><span class="keyword">where</span> </div><div class="line">	s_id <span class="keyword">in</span> </div><div class="line">(</div><div class="line">	<span class="keyword">select</span> </div><div class="line">		s_id</div><div class="line">	<span class="keyword">from</span> </div><div class="line">		t_score </div><div class="line">	<span class="keyword">where</span> </div><div class="line">		score&gt;=<span class="number">60</span> </div><div class="line">	<span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">		s_id </div><div class="line">	<span class="keyword">having</span> </div><div class="line">		<span class="keyword">count</span>(<span class="number">1</span>)&gt;=<span class="number">2</span></div><div class="line">);</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-04.png-blog.photo" alt="data-analyst-interview-sql-04-04"></p>
<h2 id="查询每个学生的个人信息及班级信息及所有科目分数，按照班级ID升序排列，课程分数降序排列"><a href="#查询每个学生的个人信息及班级信息及所有科目分数，按照班级ID升序排列，课程分数降序排列" class="headerlink" title="查询每个学生的个人信息及班级信息及所有科目分数，按照班级ID升序排列，课程分数降序排列"></a>查询每个学生的个人信息及班级信息及所有科目分数，按照班级ID升序排列，课程分数降序排列</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	a.*,b.c_name,c.course_name,c.score</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_student a</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_class b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	b.c_id = a.c_id</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_score c </div><div class="line"><span class="keyword">on</span> </div><div class="line">	c.s_id = a.s_id</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span></div><div class="line">	a.c_id <span class="keyword">asc</span>,</div><div class="line">	c.score <span class="keyword">desc</span> </div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-01.png-blog.photo" alt="data-analyst-interview-sql-04-01"></p>
<h2 id="查询每个学生的学生ID、学生姓名、班级名称、总分、平均分，按照班级名称升序、总分降序排列"><a href="#查询每个学生的学生ID、学生姓名、班级名称、总分、平均分，按照班级名称升序、总分降序排列" class="headerlink" title="查询每个学生的学生ID、学生姓名、班级名称、总分、平均分，按照班级名称升序、总分降序排列"></a>查询每个学生的学生ID、学生姓名、班级名称、总分、平均分，按照班级名称升序、总分降序排列</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	a.s_id,</div><div class="line">	a.s_name,</div><div class="line">	b.c_name,</div><div class="line">	<span class="keyword">sum</span>(c.score) total_score,</div><div class="line">	<span class="keyword">avg</span>(c.score) avg_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_student a</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_class b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	b.c_id = a.c_id</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_score c </div><div class="line"><span class="keyword">on</span> </div><div class="line">	c.s_id = a.s_id</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">	a.s_id,</div><div class="line">	a.s_name,</div><div class="line">	b.c_name</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> </div><div class="line">	b.c_name,</div><div class="line">	total_score <span class="keyword">desc</span></div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-02.png-blog.photo" alt="data-analyst-interview-sql-04-02"></p>
<h2 id="上一题，加上平均分大于60分"><a href="#上一题，加上平均分大于60分" class="headerlink" title="上一题，加上平均分大于60分"></a>上一题，加上平均分大于60分</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	a.s_id,</div><div class="line">	a.s_name,</div><div class="line">	b.c_name,</div><div class="line">	<span class="keyword">sum</span>(c.score) total_score,</div><div class="line">	<span class="keyword">avg</span>(c.score) avg_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_student a</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_class b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	b.c_id = a.c_id</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_score c </div><div class="line"><span class="keyword">on</span> </div><div class="line">	c.s_id = a.s_id</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">	a.s_id,</div><div class="line">	a.s_name,</div><div class="line">	b.c_name</div><div class="line"><span class="keyword">having</span> </div><div class="line">	avg_score &gt;= <span class="number">60</span></div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> </div><div class="line">	b.c_name,</div><div class="line">	total_score <span class="keyword">desc</span></div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-05.png-blog.photo" alt="data-analyst-interview-sql-04-05"></p>
<h2 id="查询数学成绩比语文成绩高的所有学生信息及数学、语文的成绩"><a href="#查询数学成绩比语文成绩高的所有学生信息及数学、语文的成绩" class="headerlink" title="查询数学成绩比语文成绩高的所有学生信息及数学、语文的成绩"></a>查询数学成绩比语文成绩高的所有学生信息及数学、语文的成绩</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 使用子查询</span></div><div class="line"><span class="keyword">select</span></div><div class="line">	x.*,</div><div class="line">	a.course_name course_math,</div><div class="line">	a.score math_score,</div><div class="line">	b.course_name course_language ,</div><div class="line">	b.score language_score</div><div class="line"><span class="keyword">from</span></div><div class="line">	t_student x</div><div class="line"><span class="keyword">join</span> </div><div class="line">(</div><div class="line">	<span class="comment">-- 所有学生的数学成绩</span></div><div class="line">	<span class="keyword">select</span></div><div class="line">		*</div><div class="line">	<span class="keyword">from</span> </div><div class="line">		t_score</div><div class="line">	<span class="keyword">WHERE</span></div><div class="line">		course_name = <span class="string">'数学'</span></div><div class="line">) a</div><div class="line"><span class="keyword">on</span> </div><div class="line">	x.s_id = a.s_id</div><div class="line"><span class="keyword">join</span> (</div><div class="line">	<span class="comment">-- 所有学生的语文成绩</span></div><div class="line">	<span class="keyword">select</span></div><div class="line">		*</div><div class="line">	<span class="keyword">from</span> </div><div class="line">		t_score</div><div class="line">	<span class="keyword">WHERE</span></div><div class="line">		course_name = <span class="string">'语文'</span></div><div class="line">) b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	a.s_id = b.s_id</div><div class="line"><span class="keyword">and</span> </div><div class="line">	b.score &lt;= a.score</div><div class="line">;</div><div class="line"></div><div class="line"><span class="comment">-- 2. 使用join</span></div><div class="line"><span class="keyword">select</span></div><div class="line">	x.*,</div><div class="line">	y.course_name course_math,</div><div class="line">	y.score math_score,</div><div class="line">	z.course_name course_language ,</div><div class="line">	z.score language_score</div><div class="line"><span class="keyword">from</span></div><div class="line">	t_student x</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_score y</div><div class="line"><span class="keyword">ON</span></div><div class="line">	x.s_id = y.s_id</div><div class="line"><span class="keyword">and</span> </div><div class="line">	course_name = <span class="string">'数学'</span></div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_score z</div><div class="line"><span class="keyword">on</span> </div><div class="line">	z.course_name = <span class="string">'语文'</span></div><div class="line"><span class="keyword">and</span> </div><div class="line">	z.s_id = y.s_id </div><div class="line"><span class="keyword">and</span> </div><div class="line">	z.score &lt;= y.score</div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-90576d5281d0c7eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="语文成绩比数学成绩好的"></p>
<h2 id="查询英语和语文成绩都大于60的学生信息"><a href="#查询英语和语文成绩都大于60的学生信息" class="headerlink" title="查询英语和语文成绩都大于60的学生信息"></a>查询英语和语文成绩都大于60的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> x.* <span class="keyword">from</span> t_student x</div><div class="line"><span class="keyword">join</span> (</div><div class="line">	<span class="keyword">select</span> </div><div class="line">		a.s_id</div><div class="line">	<span class="keyword">from</span> </div><div class="line">		t_score a</div><div class="line">	<span class="keyword">where</span> </div><div class="line">		a.score &gt; <span class="number">60</span></div><div class="line">	<span class="keyword">and</span> </div><div class="line">		a.course_name <span class="keyword">in</span> (<span class="string">'英语'</span>,<span class="string">'语文'</span>)</div><div class="line">	<span class="keyword">group</span> <span class="keyword">by</span></div><div class="line">		a.s_id </div><div class="line">	<span class="keyword">having</span></div><div class="line">		<span class="keyword">count</span>(<span class="number">1</span>) = <span class="number">2</span></div><div class="line">) y </div><div class="line"><span class="keyword">on</span> y.s_id=x.s_id</div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-06.png-blog.photo" alt="data-analyst-interview-sql-04-06"></p>
<h2 id="查询每个学生的学生ID、学生姓名及平均分-按照平局分降序排列"><a href="#查询每个学生的学生ID、学生姓名及平均分-按照平局分降序排列" class="headerlink" title="查询每个学生的学生ID、学生姓名及平均分,按照平局分降序排列"></a>查询每个学生的学生ID、学生姓名及平均分,按照平局分降序排列</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name,</div><div class="line">	<span class="keyword">avg</span>(a.score) avg_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_score a</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_student b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	b.s_id = a.s_id</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> </div><div class="line">	avg_score <span class="keyword">desc</span></div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-07.png-blog.photo" alt="data-analyst-interview-sql-04-07"></p>
<h2 id="上一题，加上，平局分大于60分"><a href="#上一题，加上，平局分大于60分" class="headerlink" title="上一题，加上，平局分大于60分"></a>上一题，加上，平局分大于60分</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name,</div><div class="line">	<span class="keyword">avg</span>(a.score) avg_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_score a</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_student b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	b.s_id = a.s_id</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name</div><div class="line"><span class="keyword">having</span> </div><div class="line">	avg_score &gt; <span class="number">60</span></div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> </div><div class="line">	avg_score <span class="keyword">desc</span></div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-08.png-blog.photo" alt="data-analyst-interview-sql-04-08"></p>
<h2 id="上上一题，加上只查看平均分最高的学生信息"><a href="#上上一题，加上只查看平均分最高的学生信息" class="headerlink" title="上上一题，加上只查看平均分最高的学生信息"></a>上上一题，加上只查看平均分最高的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name,</div><div class="line">	<span class="keyword">avg</span>(a.score) avg_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_score a</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_student b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	b.s_id = a.s_id</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> </div><div class="line">	avg_score <span class="keyword">desc</span></div><div class="line"><span class="keyword">limit</span> <span class="number">1</span></div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-09.png-blog.photo" alt="data-analyst-interview-sql-04-09"></p>
<h2 id="上上上一题，加上平局分第3高的学生信息"><a href="#上上上一题，加上平局分第3高的学生信息" class="headerlink" title="上上上一题，加上平局分第3高的学生信息"></a>上上上一题，加上平局分第3高的学生信息</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name,</div><div class="line">	<span class="keyword">avg</span>(a.score) avg_score</div><div class="line"><span class="keyword">from</span> </div><div class="line">	t_score a</div><div class="line"><span class="keyword">join</span> </div><div class="line">	t_student b </div><div class="line"><span class="keyword">on</span> </div><div class="line">	b.s_id = a.s_id</div><div class="line"><span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">	b.s_id,</div><div class="line">	b.s_name</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> </div><div class="line">	avg_score <span class="keyword">desc</span></div><div class="line"><span class="keyword">limit</span> <span class="number">1</span> <span class="keyword">offset</span> <span class="number">2</span></div><div class="line">;</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-10.png-blog.photo" alt="data-analyst-interview-sql-04-10"></p>
<h2 id="换一种方式实现上一题"><a href="#换一种方式实现上一题" class="headerlink" title="换一种方式实现上一题"></a>换一种方式实现上一题</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">	x.s_id,</div><div class="line">	x.s_name,</div><div class="line">	x.avg_score,</div><div class="line">	@cur_rank := @cur_rank+<span class="number">1</span> <span class="keyword">as</span> score_rank</div><div class="line"><span class="keyword">from</span> (</div><div class="line">	<span class="keyword">select</span> </div><div class="line">		b.s_id,</div><div class="line">		b.s_name,</div><div class="line">		<span class="keyword">avg</span>(a.score) avg_score</div><div class="line">	<span class="keyword">from</span> </div><div class="line">		t_score a</div><div class="line">	<span class="keyword">join</span> </div><div class="line">		t_student b </div><div class="line">	<span class="keyword">on</span> </div><div class="line">		b.s_id = a.s_id</div><div class="line">	<span class="keyword">group</span> <span class="keyword">by</span> </div><div class="line">		b.s_id,</div><div class="line">		b.s_name</div><div class="line">) x</div><div class="line"><span class="keyword">cross</span> <span class="keyword">join</span> (</div><div class="line">	<span class="keyword">select</span> @cur_rank:=<span class="number">0</span></div><div class="line">)y</div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> </div><div class="line">	x.avg_score <span class="keyword">desc</span>;</div></pre></td></tr></table></figure>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-12.png-blog.photo" alt="data-analyst-interview-sql-04-12"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SQL笔试题&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;下面的SQL基于MySQL&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;下面整理些MySQL学习过程中，基本的练习题，题目来源于网上及个人总结。&lt;/p&gt;
&lt;h2 id=&quot;测试数据&quot;&gt;&lt;a href=&quot;#测试数据&quot; class=&quot;headerlink&quot; title=&quot;测试数据&quot;&gt;&lt;/a&gt;测试数据&lt;/h2&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;25&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;26&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;27&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;28&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;29&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;30&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;31&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;32&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;33&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;34&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;35&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;36&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;37&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;38&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;39&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;40&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;41&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;42&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;43&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;44&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;45&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;46&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;47&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;48&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;49&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;50&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;51&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;52&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;53&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;54&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;55&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;56&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;57&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;58&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;59&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;60&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;61&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;62&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;63&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;64&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;65&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;66&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;67&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;68&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;69&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;70&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; t_student(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	s_id &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;学生ID&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	s_name &lt;span class=&quot;built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;学生姓名&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	s_gender &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;学生性别 0-男,1-女&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	s_birthday &lt;span class=&quot;built_in&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;出生日期&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	s_hobby &lt;span class=&quot;built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;爱好&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	c_id &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;班级ID&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;学生表&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; t_class(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	c_id &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;班级ID&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	c_name &lt;span class=&quot;built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;班级名称&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;班级表&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; t_score(&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	sc_id &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;成绩ID&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	s_id &lt;span class=&quot;built_in&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;学生ID&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	course_name &lt;span class=&quot;built_in&quot;&gt;varchar&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;课程名称&#39;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	score &lt;span class=&quot;built_in&quot;&gt;numeric&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;成绩&#39;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;	&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;) &lt;span class=&quot;keyword&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;成绩表&#39;&lt;/span&gt;;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_class &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;901&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;一班&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_class &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;902&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;二班&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_class &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;903&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;三班&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_class &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;905&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;五班&#39;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;101&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;路飞&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1990-01-26&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;吃肉,睡觉&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;901&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;102&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;娜美&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1995-10-05&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;足球,篮球&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;901&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;103&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;乔巴&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1992-08-11&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;唱歌,吃肉&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;901&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;104&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;鸣人&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1991-03-29&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;拉面,忍术&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;901&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;105&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;卡卡西&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1989-05-10&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;看书,吃肉&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;902&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;106&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;乌索普&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1988-02-02&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;跳舞,篮球&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;902&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;107&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;乔峰&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1990-12-12&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;跑步,羽毛球&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;902&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;108&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;段誉&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1990-12-13&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;吃肉,加班&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;903&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;109&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;虚竹&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1991-01-22&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;看电影,旅行&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;903&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;110&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;杨过&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;2000-03-04&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;旅行&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;903&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;111&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;令狐冲&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;1997-03-04&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;喝酒&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;904&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;101&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;39&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;102&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;103&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;54&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;104&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;38&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;105&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;106&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;107&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;108&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;84&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;109&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;87&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;110&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;数学&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;67&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;101&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;73&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;102&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;71&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;103&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;82&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;104&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;83&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;105&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;106&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;87&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;17&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;107&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;74&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;108&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;109&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;110&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;语文&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;26&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;21&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;101&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;102&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;103&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;38&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;24&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;104&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;82&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;105&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;26&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;106&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;107&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;108&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;68&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;109&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;77&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; t_score &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;110&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;英语&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;);&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="笔试题" scheme="https://yuguiyang.github.io/categories/%E7%AC%94%E8%AF%95%E9%A2%98/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="笔试题" scheme="https://yuguiyang.github.io/tags/%E7%AC%94%E8%AF%95%E9%A2%98/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-关联查询</title>
    <link href="https://yuguiyang.github.io/2017/09/09/mysql-handbook-03/"/>
    <id>https://yuguiyang.github.io/2017/09/09/mysql-handbook-03/</id>
    <published>2017-09-09T02:00:00.000Z</published>
    <updated>2017-09-09T14:47:09.459Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>关联查询</p>
<p>前面，我们介绍的都是单表查询（就是只从一张表中获取数据），而实际应用的时候，我们都会同时查询多张表，这里，我们就介绍下，多表关联查询的使用。</p>
<blockquote>
<p>SQL join 用于根据两个或多个表中的列之间的关系，从这些表中查询数据</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-d28b309853b85c19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="关联查询.png"></p>
<h2 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h2><blockquote>
<p>主键（Primary Key）：可以唯一确定一条记录的字段，比如学生表中的学生ID，生活中我们的身份证号<br>外键（Foreign Key）：指向另一张表的主键，比如学生表中的班级ID，班级ID是班级表中的主键，但在学生表中是外键</p>
</blockquote>
<p>主键和外键可以在建表的时候指定，他可以在数据库层面，控制你的数据的完整性、一致性。</p>
<a id="more"></a>
<p>测试数据参考：<a href="http://yuguiyang.github.io/2017/09/09/mysql-handbook-01/">http://yuguiyang.github.io/2017/09/09/mysql-handbook-01/</a></p>
<h2 id="inner-join"><a href="#inner-join" class="headerlink" title="inner join"></a>inner join</h2><p>inner join 可以简写为 join，结果集是两张表中 <strong>都存在的记录</strong>，是一个交集，详情参考上面的图片。<br>比如：在学生表中，有一个班级ID，我们想根据班级ID，在班级表中找到班级信息<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    *</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student a </div><div class="line"><span class="comment">-- 要关联查询的表</span></div><div class="line"><span class="keyword">join</span> </div><div class="line">    t_class b </div><div class="line"><span class="comment">-- 使用什么字段去关联这两张表</span></div><div class="line"><span class="keyword">on</span> </div><div class="line">    a.c_id = b.c_id</div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-a5ae853962b43597.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="join"></p>
<h2 id="left-join"><a href="#left-join" class="headerlink" title="left join"></a>left join</h2><p>左关联，以左边的表为主表，不管外键在右表中是否存在，左表的数据都会存在。<br>比如学生表中，有这样一条记录，他的班级ID是904，但是班级表中并没有904的班级信息，<br>所以，使用join的话是查不到这条记录的<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 2. left join </span></div><div class="line"><span class="comment">-- 学生表为主表，包含所有学生信息</span></div><div class="line"><span class="keyword">select</span> </div><div class="line">    *</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student a </div><div class="line"><span class="keyword">left</span> <span class="keyword">join</span> </div><div class="line">    t_class b </div><div class="line"><span class="keyword">on</span> </div><div class="line">    a.c_id = b.c_id</div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-fc4ed0f6e9def043.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="left join"></p>
<h2 id="right-join"><a href="#right-join" class="headerlink" title="right join"></a>right join</h2><p>右关联，和做关联类似，但已右表为主表<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">-- 3. right join </span></div><div class="line"><span class="comment">-- 班级表为主表，不管改班级是否有学生信息</span></div><div class="line"><span class="keyword">select</span> </div><div class="line">    *</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student a </div><div class="line"><span class="keyword">right</span> <span class="keyword">join</span> </div><div class="line">    t_class b </div><div class="line"><span class="keyword">on</span> </div><div class="line">    a.c_id = b.c_id</div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-f5a4a9876a971a43.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="right join"></p>
<h2 id="full-outer-join"><a href="#full-outer-join" class="headerlink" title="full outer join"></a>full outer join</h2><p>全关联，mysql没有full join 语法，我们可以通过使用union来实现<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> </div><div class="line">    *</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student a </div><div class="line"><span class="keyword">left</span> <span class="keyword">join</span> </div><div class="line">    t_class b </div><div class="line"><span class="keyword">on</span> </div><div class="line">    a.c_id = b.c_id</div><div class="line"><span class="keyword">UNION</span></div><div class="line"><span class="keyword">select</span> </div><div class="line">    *</div><div class="line"><span class="keyword">from</span> </div><div class="line">    t_student a </div><div class="line"><span class="keyword">right</span> <span class="keyword">join</span> </div><div class="line">    t_class b </div><div class="line"><span class="keyword">on</span> </div><div class="line">    a.c_id = b.c_id</div><div class="line">;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-f5d58640d50dbd22.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="full join"></p>
<h2 id="cross-join"><a href="#cross-join" class="headerlink" title="cross join"></a>cross join</h2><p>cross join 是对2个表做笛卡尔积<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_class a </div><div class="line"><span class="keyword">cross</span> <span class="keyword">join</span> t_class b </div><div class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.c_id,b.c_id</div></pre></td></tr></table></figure></p>
<p><img src="http://7xl61k.com1.z0.glb.clouddn.com/data-analyst-interview-sql-04-11.png-blog.photo" alt="data-analyst-interview-sql-04-11"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>关联查询的话，我们主要是选择好主表，然后找好表与表之间的关联关系，注意多对多、一对多的这种关系，验证号结果数据就行了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;关联查询&lt;/p&gt;
&lt;p&gt;前面，我们介绍的都是单表查询（就是只从一张表中获取数据），而实际应用的时候，我们都会同时查询多张表，这里，我们就介绍下，多表关联查询的使用。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SQL join 用于根据两个或多个表中的列之间的关系，从这些表中查询数据&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-d28b309853b85c19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;关联查询.png&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;前置知识&quot;&gt;&lt;a href=&quot;#前置知识&quot; class=&quot;headerlink&quot; title=&quot;前置知识&quot;&gt;&lt;/a&gt;前置知识&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;主键（Primary Key）：可以唯一确定一条记录的字段，比如学生表中的学生ID，生活中我们的身份证号&lt;br&gt;外键（Foreign Key）：指向另一张表的主键，比如学生表中的班级ID，班级ID是班级表中的主键，但在学生表中是外键&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;主键和外键可以在建表的时候指定，他可以在数据库层面，控制你的数据的完整性、一致性。&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-中文排序</title>
    <link href="https://yuguiyang.github.io/2017/09/09/mysql-handbook-02/"/>
    <id>https://yuguiyang.github.io/2017/09/09/mysql-handbook-02/</id>
    <published>2017-09-09T01:00:00.000Z</published>
    <updated>2017-09-09T10:50:41.221Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>中文排序</p>
<p>测试数据参考：<a href="http://yuguiyang.github.io/2017/09/09/mysql-handbook-01/">http://yuguiyang.github.io/2017/09/09/mysql-handbook-01/</a></p>
<p>以前还真没有关注这个中文排序的问题，这里记录下。</p>
<p>一张学生表<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-26480895de68e815.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="学生表"></p>
<p>我们根据s_name来排序<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">order</span> <span class="keyword">by</span> s_name;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-0f5ecf1f3512536d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="根据s_name排序"></p>
<p>这里的中文排序，是不对的，应该是由于字符集的问题，一般情况下，数据库中的编码都是使用UTF-8的，所以，对于中文会有问题。</p>
<p>从网上找到2中解决办法</p>
<a id="more"></a>
<h2 id="create-table的时候加上binary属性（经测试，不好用）"><a href="#create-table的时候加上binary属性（经测试，不好用）" class="headerlink" title="create table的时候加上binary属性（经测试，不好用）"></a>create table的时候加上binary属性（经测试，不好用）</h2><p>注意下s_name字段，我们添加了binary属性<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`t_student_test`</span> (</div><div class="line">  <span class="string">`s_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'学生ID'</span>,</div><div class="line">  <span class="string">`s_name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="built_in">binary</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'学生姓名'</span>,</div><div class="line">  <span class="string">`s_gender`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'学生性别 0-男,1-女'</span>,</div><div class="line">  <span class="string">`s_birthday`</span> <span class="built_in">date</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'出生日期'</span>,</div><div class="line">  <span class="string">`s_hobby`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'爱好'</span>,</div><div class="line">  <span class="string">`c_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'班级ID'</span></div><div class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">'学生表'</span>;</div></pre></td></tr></table></figure></p>
<p>这里，我试验是失败的，中文排序依然不对</p>
<h2 id="在order-by-后面，使用-convert函数"><a href="#在order-by-后面，使用-convert函数" class="headerlink" title="在order by 后面，使用 convert函数"></a>在order by 后面，使用 convert函数</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">convert</span>(s_name <span class="keyword">using</span> gbk);</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-27d3391d7061ae9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="中文排序"></p>
<p>使用convert函数是可以的，没有问题</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;中文排序&lt;/p&gt;
&lt;p&gt;测试数据参考：&lt;a href=&quot;http://yuguiyang.github.io/2017/09/09/mysql-handbook-01/&quot;&gt;http://yuguiyang.github.io/2017/09/09/mysql-handbook-01/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;以前还真没有关注这个中文排序的问题，这里记录下。&lt;/p&gt;
&lt;p&gt;一张学生表&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; t_student;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-26480895de68e815.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;学生表&quot;&gt;&lt;/p&gt;
&lt;p&gt;我们根据s_name来排序&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; t_student &lt;span class=&quot;keyword&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;by&lt;/span&gt; s_name;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-0f5ecf1f3512536d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;根据s_name排序&quot;&gt;&lt;/p&gt;
&lt;p&gt;这里的中文排序，是不对的，应该是由于字符集的问题，一般情况下，数据库中的编码都是使用UTF-8的，所以，对于中文会有问题。&lt;/p&gt;
&lt;p&gt;从网上找到2中解决办法&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-基本语法介绍</title>
    <link href="https://yuguiyang.github.io/2017/09/09/mysql-handbook-01/"/>
    <id>https://yuguiyang.github.io/2017/09/09/mysql-handbook-01/</id>
    <published>2017-09-09T00:00:00.000Z</published>
    <updated>2017-09-09T10:25:04.832Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>基本语法介绍</p>
<h2 id="1-什么是SQL"><a href="#1-什么是SQL" class="headerlink" title="1. 什么是SQL"></a>1. 什么是SQL</h2><p>SQL（Structured Query Language）结构化查询语言，通过SQL，我们就可以查询数据库中的数据，而数据再数据库中又是以表的形式保存的，所以SQL查询，主要就是对表进行查询。</p>
<p>SQL的语法就和学习英语的语法、汉语拼音一样，满足给定的套路，去使用就可以了。</p>
<p>当我们拿到了数据库的连接信息，连接到一个数据库上，我们就可以开始写SQL了。</p>
<h2 id="2-Navicat的使用"><a href="#2-Navicat的使用" class="headerlink" title="2. Navicat的使用"></a>2. Navicat的使用</h2><p>MySQL的客户端有很多，通常使用的，可能有Navicat，还有MySQL自带的workbench。<br>Navicat是收费产品，但在网上可以找到XX版，workbench是免费的。</p>
<p>这里以Navicat为例，简单介绍下。<br><img src="http://upload-images.jianshu.io/upload_images/76024-c7a0409bf6b9a087.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="菜单-新建连接"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-4e9a9e1bce14c574.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="新建连接"><br>在这里，输入数据库地址、用户名、密码等等就行了。</p>
<p>这一个一个圆柱形的，就是一个数据库实例，下面那些电子表格图标的就是表，数据就存储在表中。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-cfabf6503b213d37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="数据库及表"></p>
<a id="more"></a>
<p>默认是不会看到表结构信息的，我们勾选下面的配置之后，就可以看到了<br><img src="http://upload-images.jianshu.io/upload_images/76024-14e110741cf8f15d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="对象信息"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-49271a0110fe3798.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表结构信息"></p>
<h2 id="3-基本语法"><a href="#3-基本语法" class="headerlink" title="3. 基本语法"></a>3. 基本语法</h2><h3 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</div><div class="line">    s_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'学生ID'</span>,</div><div class="line">    s_name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">comment</span> <span class="string">'学生姓名'</span>,</div><div class="line">    s_gender <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'学生性别 0-男,1-女'</span>,</div><div class="line">    s_birthday <span class="built_in">date</span> <span class="keyword">comment</span> <span class="string">'出生日期'</span>,</div><div class="line">    s_hobby <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">comment</span> <span class="string">'爱好'</span>,</div><div class="line">    c_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'班级ID'</span></div><div class="line">) <span class="keyword">comment</span> <span class="string">'学生表'</span>;</div><div class="line"></div><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_class(</div><div class="line">    c_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'班级ID'</span>,</div><div class="line">    c_name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">comment</span> <span class="string">'班级名称'</span></div><div class="line">) <span class="keyword">comment</span> <span class="string">'班级表'</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_score(</div><div class="line">    sc_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'成绩ID'</span>,</div><div class="line">    s_id <span class="built_in">int</span> <span class="keyword">comment</span> <span class="string">'学生ID'</span>,</div><div class="line">    course_name <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">comment</span> <span class="string">'课程名称'</span>,</div><div class="line">    score <span class="built_in">numeric</span>(<span class="number">10</span>,<span class="number">0</span>) <span class="keyword">comment</span> <span class="string">'成绩'</span></div><div class="line">    </div><div class="line">) <span class="keyword">comment</span> <span class="string">'成绩表'</span>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span>(<span class="number">901</span>,<span class="string">'一班'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span>(<span class="number">902</span>,<span class="string">'二班'</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span>(<span class="number">903</span>,<span class="string">'三班'</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">101</span>,<span class="string">'路飞'</span>,<span class="number">0</span>,<span class="string">'1990-01-26'</span>,<span class="string">'吃肉,睡觉'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">102</span>,<span class="string">'娜美'</span>,<span class="number">1</span>,<span class="string">'1995-10-05'</span>,<span class="string">'足球,篮球'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">103</span>,<span class="string">'乔巴'</span>,<span class="number">0</span>,<span class="string">'1992-08-11'</span>,<span class="string">'唱歌,吃肉'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">104</span>,<span class="string">'鸣人'</span>,<span class="number">0</span>,<span class="string">'1991-03-29'</span>,<span class="string">'拉面,忍术'</span>,<span class="number">901</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">105</span>,<span class="string">'卡卡西'</span>,<span class="number">1</span>,<span class="string">'1989-05-10'</span>,<span class="string">'看书,吃肉'</span>,<span class="number">902</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">106</span>,<span class="string">'乌索普'</span>,<span class="number">1</span>,<span class="string">'1988-02-02'</span>,<span class="string">'跳舞,篮球'</span>,<span class="number">902</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">107</span>,<span class="string">'乔峰'</span>,<span class="number">0</span>,<span class="string">'1990-12-12'</span>,<span class="string">'跑步,羽毛球'</span>,<span class="number">902</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">108</span>,<span class="string">'段誉'</span>,<span class="number">0</span>,<span class="string">'1990-12-13'</span>,<span class="string">'吃肉,加班'</span>,<span class="number">903</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">109</span>,<span class="string">'虚竹'</span>,<span class="number">1</span>,<span class="string">'1991-01-22'</span>,<span class="string">'看电影,旅行'</span>,<span class="number">903</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">110</span>,<span class="string">'杨过'</span>,<span class="number">0</span>,<span class="string">'2000-03-04'</span>,<span class="string">'旅行'</span>,<span class="number">903</span>);</div><div class="line"></div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">101</span>,<span class="string">'数学'</span>,<span class="number">39</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">2</span>,<span class="number">102</span>,<span class="string">'数学'</span>,<span class="number">20</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">3</span>,<span class="number">103</span>,<span class="string">'数学'</span>,<span class="number">54</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">4</span>,<span class="number">104</span>,<span class="string">'数学'</span>,<span class="number">38</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">5</span>,<span class="number">105</span>,<span class="string">'数学'</span>,<span class="number">70</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">6</span>,<span class="number">106</span>,<span class="string">'数学'</span>,<span class="number">15</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">7</span>,<span class="number">107</span>,<span class="string">'数学'</span>,<span class="number">75</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">8</span>,<span class="number">108</span>,<span class="string">'数学'</span>,<span class="number">84</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">9</span>,<span class="number">109</span>,<span class="string">'数学'</span>,<span class="number">87</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">10</span>,<span class="number">110</span>,<span class="string">'数学'</span>,<span class="number">67</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">11</span>,<span class="number">101</span>,<span class="string">'语文'</span>,<span class="number">73</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">12</span>,<span class="number">102</span>,<span class="string">'语文'</span>,<span class="number">71</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">13</span>,<span class="number">103</span>,<span class="string">'语文'</span>,<span class="number">82</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">14</span>,<span class="number">104</span>,<span class="string">'语文'</span>,<span class="number">83</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">15</span>,<span class="number">105</span>,<span class="string">'语文'</span>,<span class="number">36</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">16</span>,<span class="number">106</span>,<span class="string">'语文'</span>,<span class="number">87</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">17</span>,<span class="number">107</span>,<span class="string">'语文'</span>,<span class="number">74</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">18</span>,<span class="number">108</span>,<span class="string">'语文'</span>,<span class="number">19</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">19</span>,<span class="number">109</span>,<span class="string">'语文'</span>,<span class="number">29</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">20</span>,<span class="number">110</span>,<span class="string">'语文'</span>,<span class="number">26</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">21</span>,<span class="number">101</span>,<span class="string">'英语'</span>,<span class="number">55</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">22</span>,<span class="number">102</span>,<span class="string">'英语'</span>,<span class="number">24</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">23</span>,<span class="number">103</span>,<span class="string">'英语'</span>,<span class="number">38</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">24</span>,<span class="number">104</span>,<span class="string">'英语'</span>,<span class="number">82</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">25</span>,<span class="number">105</span>,<span class="string">'英语'</span>,<span class="number">12</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">26</span>,<span class="number">106</span>,<span class="string">'英语'</span>,<span class="number">15</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">27</span>,<span class="number">107</span>,<span class="string">'英语'</span>,<span class="number">50</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">28</span>,<span class="number">108</span>,<span class="string">'英语'</span>,<span class="number">68</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">29</span>,<span class="number">109</span>,<span class="string">'英语'</span>,<span class="number">77</span>);</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_score <span class="keyword">values</span>(<span class="number">30</span>,<span class="number">110</span>,<span class="string">'英语'</span>,<span class="number">19</span>);</div></pre></td></tr></table></figure>
<h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><p>下面，我们来看看，怎样查看一张表的数据；SQL的语法呢，就好比是一个公式，初学的话我们去套用就可以了。</p>
<blockquote>
<p>SELECT 列名称 FROM 表名称<br>或者<br>SELECT * FROM 表名称</p>
</blockquote>
<p>使用Navicat执行查询<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查看学生表数据，指定字段</span></div><div class="line"><span class="keyword">select</span> s_id,s_name <span class="keyword">from</span> t_student;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-9d37e4bef2b2880e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="学生表数据"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查看所有字段</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-eae6d5cb5d674dc1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="学生表数据"></p>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>排序是很常用的功能，我们想要对结果集进行指定的排序，就要使用order by</p>
<blockquote>
<p>order by 字段名<br>默认升序，可以使用desc降序排列</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 学生ID降序排列</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">order</span> <span class="keyword">by</span> s_id <span class="keyword">desc</span>;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-d84dba85f11f7c15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="降序排列"></p>
<p>多字段排序<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 班级ID升序排列，班级ID一样的按学生ID降序排列</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">order</span> <span class="keyword">by</span> c_id,s_id <span class="keyword">desc</span>;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-367ec9920a3fa2fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="多字段排序"></p>
<h3 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h3><blockquote>
<p>指定返回记录的数目</p>
</blockquote>
<p>我们上面，都是查询一张表所有的数据，有的时候表的数据量很大，或者我们只想看看排名前3的数据，我们就可以使用limit<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 学生ID降序排列,取前3条记录</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">order</span> <span class="keyword">by</span> s_id <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">3</span>;</div></pre></td></tr></table></figure></p>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-2e411a4cfdc54cdd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="limit"></p>
<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p>前面，我们可以查看一张表的所有数据、做排序、然后只取前几行，实际使用时，一定会有这样的需求，比如我们只想看学生ID是105的记录，就需要使用where了，它可以对数据进行过滤。</p>
<blockquote>
<p>SELECT 列名称 FROM 表名称 WHERE 列 运算符 值</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-9cf31d13fc46726f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="常用的运算符.png"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查看学生ID是105的学生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_id = <span class="number">105</span>;</div><div class="line"></div><div class="line"><span class="comment">-- 查看学生ID不是105的其他学生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_id &lt;&gt; <span class="number">105</span> ;</div><div class="line"></div><div class="line"><span class="comment">-- 查看学生ID在103和108之间的学生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_id <span class="keyword">between</span> <span class="number">103</span> <span class="keyword">and</span> <span class="number">108</span>;</div></pre></td></tr></table></figure>
<p>这里还有一个操作符很常用，就是 in 和 not in。<br>in 表示在多个值中存在，加上not则表示不存在<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查看学生ID是103,105，,107的学生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_id <span class="keyword">in</span> (<span class="number">103</span>,<span class="number">105</span>,<span class="number">107</span>);</div><div class="line"></div><div class="line"><span class="comment">-- 查看学生ID不在102中的其他学生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_id <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">102</span>);</div></pre></td></tr></table></figure></p>
<h3 id="like"><a href="#like" class="headerlink" title="like"></a>like</h3><p>匹配字符串，像‘xxxx’一样</p>
<blockquote>
<p>%： 表示任意个或多个字符<br>_：表示任意单个字符</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查看喜欢吃肉的学生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_hobby <span class="keyword">like</span> <span class="string">'吃肉%'</span>;</div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> s_hobby <span class="keyword">like</span> <span class="string">'%吃肉%'</span>;</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/76024-fcf94f5dcf94cf4c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="like使用"></p>
<h3 id="and-和-or"><a href="#and-和-or" class="headerlink" title="and 和 or"></a>and 和 or</h3><p>上面，我们都是一个单独的过滤条件，实际上，我们的会有各种各样的情况，需要同时满足多种过滤条件，这就用到了 and 和 or。</p>
<blockquote>
<p>AND 和 OR 可在 WHERE 子语句中把两个或多个条件结合起来。<br>如果第一个条件和第二个条件都成立，则 AND 运算符显示一条记录。<br>如果第一个条件和第二个条件中只要有一个成立，则 OR 运算符显示一条记录。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- 查看班级ID是901的所有男生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> c_id=<span class="number">901</span> <span class="keyword">and</span> s_gender=<span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="comment">-- 查看班级ID是901或者s_id大于107的学生信息</span></div><div class="line"><span class="keyword">select</span> *<span class="keyword">from</span> t_student <span class="keyword">where</span> c_id=<span class="number">901</span> <span class="keyword">or</span> s_id &gt; <span class="number">107</span>;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;基本语法介绍&lt;/p&gt;
&lt;h2 id=&quot;1-什么是SQL&quot;&gt;&lt;a href=&quot;#1-什么是SQL&quot; class=&quot;headerlink&quot; title=&quot;1. 什么是SQL&quot;&gt;&lt;/a&gt;1. 什么是SQL&lt;/h2&gt;&lt;p&gt;SQL（Structured Query Language）结构化查询语言，通过SQL，我们就可以查询数据库中的数据，而数据再数据库中又是以表的形式保存的，所以SQL查询，主要就是对表进行查询。&lt;/p&gt;
&lt;p&gt;SQL的语法就和学习英语的语法、汉语拼音一样，满足给定的套路，去使用就可以了。&lt;/p&gt;
&lt;p&gt;当我们拿到了数据库的连接信息，连接到一个数据库上，我们就可以开始写SQL了。&lt;/p&gt;
&lt;h2 id=&quot;2-Navicat的使用&quot;&gt;&lt;a href=&quot;#2-Navicat的使用&quot; class=&quot;headerlink&quot; title=&quot;2. Navicat的使用&quot;&gt;&lt;/a&gt;2. Navicat的使用&lt;/h2&gt;&lt;p&gt;MySQL的客户端有很多，通常使用的，可能有Navicat，还有MySQL自带的workbench。&lt;br&gt;Navicat是收费产品，但在网上可以找到XX版，workbench是免费的。&lt;/p&gt;
&lt;p&gt;这里以Navicat为例，简单介绍下。&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-c7a0409bf6b9a087.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;菜单-新建连接&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-4e9a9e1bce14c574.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;新建连接&quot;&gt;&lt;br&gt;在这里，输入数据库地址、用户名、密码等等就行了。&lt;/p&gt;
&lt;p&gt;这一个一个圆柱形的，就是一个数据库实例，下面那些电子表格图标的就是表，数据就存储在表中。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/76024-cfabf6503b213d37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;数据库及表&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-序(怎样学习MySQL)</title>
    <link href="https://yuguiyang.github.io/2017/09/09/mysql-handbook-00/"/>
    <id>https://yuguiyang.github.io/2017/09/09/mysql-handbook-00/</id>
    <published>2017-09-08T21:00:00.000Z</published>
    <updated>2017-10-09T17:12:06.215Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL<br>怎样学习MySQL</p>
<p>作为一名BI开发工程师，SQL是必须要掌握的一门技能。<br>数据分析师请参考这篇《数据分析师是否要掌握SQL?》</p>
<h3 id="SQL是干嘛的呢？"><a href="#SQL是干嘛的呢？" class="headerlink" title="SQL是干嘛的呢？"></a>SQL是干嘛的呢？</h3><p>大街上随便拉个人过来，可能都听说过“大数据”，不管大数据、小数据，他这个数据到底在哪儿呢？其中一种方式，就是存储在关系型数据库中（其他的还有什么非关系型数据库、HDFS等等），就像我们把货物都放在仓库里一样，如果我们想要查看数据库中的数据，就用到了SQL。</p>
<p>SQL也是一种编程语言，偏底层，所以学起来会枯燥些，不像Tableau那样可视化效果好，可以托拉拽。只要掌握了SQL的基本语法，他就像数学公式一样，直接去套用就行了。<br>SQL的知识点也非常多，我们不需要都记住，要学会查文档、用Google，而且不同的数据库，他的语法可能不太一样，很容易记混。<br>开发人员平时说的SQL脚本，就是一段或者多段SQL或者存储过程。</p>
<a id="more"></a>
<h3 id="怎么学习SQL"><a href="#怎么学习SQL" class="headerlink" title="怎么学习SQL?"></a>怎么学习SQL?</h3><p>随着互联网的发展，现在的学习成本非常的低，网络上的免费资源非常多。<br>评价好些的像w3school的<a href="http://www.w3school.com.cn/sql/index.asp" target="_blank" rel="external">SQL 教程</a><br>在这，就可以了解SQL的基本语法，记住这些，再配合习题练习就算是入门了。</p>
<p><a href="http://zh.sqlzoo.net/" target="_blank" rel="external">sqlzoo</a>是一个在线的练习网站,上面有很多SQL的练习题，我们可以直接在线写SQL，而且提交后，还会告诉我们对错。</p>
<p>如果还有时间的话，找一本书《SQL必知必会》、《MySQL必知必会》、《深入浅出SQL》，查漏补缺，可以更好的梳理自己的知识架构。</p>
<p>SQL就像所有的知识一样，学会不用很容易就忘掉，所以最好可以在工作中多用用，而且一定要记住“实践是检验真理的唯一标准”，SQL一定要多练习、多实践。</p>
<h3 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h3><p>客户端安装及pdf资料：<a href="http://www.jianshu.com/p/3e56600d97de" target="_blank" rel="external">SQL工具及资料</a><br>后面也整理了一些MySQL的知识点<a href="http://yuguiyang.github.io/categories/MySQL/">MySQL分类</a>，欢迎大家访问。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQL&lt;br&gt;怎样学习MySQL&lt;/p&gt;
&lt;p&gt;作为一名BI开发工程师，SQL是必须要掌握的一门技能。&lt;br&gt;数据分析师请参考这篇《数据分析师是否要掌握SQL?》&lt;/p&gt;
&lt;h3 id=&quot;SQL是干嘛的呢？&quot;&gt;&lt;a href=&quot;#SQL是干嘛的呢？&quot; class=&quot;headerlink&quot; title=&quot;SQL是干嘛的呢？&quot;&gt;&lt;/a&gt;SQL是干嘛的呢？&lt;/h3&gt;&lt;p&gt;大街上随便拉个人过来，可能都听说过“大数据”，不管大数据、小数据，他这个数据到底在哪儿呢？其中一种方式，就是存储在关系型数据库中（其他的还有什么非关系型数据库、HDFS等等），就像我们把货物都放在仓库里一样，如果我们想要查看数据库中的数据，就用到了SQL。&lt;/p&gt;
&lt;p&gt;SQL也是一种编程语言，偏底层，所以学起来会枯燥些，不像Tableau那样可视化效果好，可以托拉拽。只要掌握了SQL的基本语法，他就像数学公式一样，直接去套用就行了。&lt;br&gt;SQL的知识点也非常多，我们不需要都记住，要学会查文档、用Google，而且不同的数据库，他的语法可能不太一样，很容易记混。&lt;br&gt;开发人员平时说的SQL脚本，就是一段或者多段SQL或者存储过程。&lt;/p&gt;
    
    </summary>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/categories/MySQL/"/>
    
    
      <category term="SQL" scheme="https://yuguiyang.github.io/tags/SQL/"/>
    
      <category term="MySQL" scheme="https://yuguiyang.github.io/tags/MySQL/"/>
    
  </entry>
  
</feed>
